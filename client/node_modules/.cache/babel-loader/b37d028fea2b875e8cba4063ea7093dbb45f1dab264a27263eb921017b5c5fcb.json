{"ast":null,"code":"import{useContext,useEffect,useState,useRef}from\"react\";import{format}from'timeago.js';import{AuthContext}from\"../../context/AuthContext\";import Icon from'@material-ui/core/Icon';import axios from\"axios\";import{MoreVert}from'@material-ui/icons';import ArrowForwardIcon from'@mui/icons-material/ArrowForward';import{Link}from'react-router-dom';import{withStyles}from'@material-ui/core/styles';import{styles}from'./postStyle';import CardHeader from'@material-ui/core/CardHeader';import TextField from'@material-ui/core/TextField';import Avatar from'@material-ui/core/Avatar';import CommentSA from'../comment/commentSA';import Button from'@mui/material/Button';import Stack from'@mui/material/Stack';import Linkify from'react-linkify';import SendIcon from'@mui/icons-material/Send';import{useMediaQuery}from'react-responsive';//import 'emoji-mart/css/emoji-mart.css';\nimport InputEmoji from\"react-input-emoji\";import MoodIcon from'@mui/icons-material/Mood';import React from'react';import{LinkPreview}from'@dhaiwat10/react-link-preview';import{InView}from'react-intersection-observer';import{COLORS}from\"../values/colors\";import linkifyit from'linkify-it';import{Write_something,comments}from'../../constants';import'./post.css';import{toast}from'react-toastify';//import User from \"../../../../server/models/User\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Post(_ref){let{onScrolling,post,classes,isDetail}=_ref;const[comments,setComments]=useState([]);const inputEl=React.useRef<HTMLInputElement>null;//console.log(post);\nconst[like,setLike]=useState(post.likes.length);const[dislike,setDislike]=useState(post.dislikes.length);const[isLiked,setIsLiked]=useState(false);const[isDisliked,setIsDisliked]=useState(false);const[isLikedByOne,setIsLikedByOne]=useState(false);const[isDislikedByOne,setIsDislikedByOne]=useState(false);const[currentPost,setCurrentPost]=useState(post);const[repost,setRepost]=useState(post.reposts?post.reposts.length:0);const[repostUser,setRepostUser]=useState({});const[repostId,setRepostId]=useState(post.reposts[post.reposts?post.reposts.length:0]);const[rank,setRank]=useState(parseFloat(post.rank.toFixed(2)));//useState(post.reposts? post.reposts.length: 0);\nconst[isReposted,setIsReposted]=useState(false);const[webViewVisible,setWebViewVisible]=useState(false);const[webViewUrl,setWebViewUrl]=useState('');const[isNew,setIsNew]=useState(false);const[user,setUser]=useState({});const[text,setText]=useState('');const[inputValue,setInputValue]=useState(\"\");const linkify=linkifyit();const[isVisible,setIsVisible]=useState(true);const ref=useRef(null);const desc=useRef();const isMobileDevice=useMediaQuery({query:\"(min-device-width: 480px)\"});const isTabletDevice=useMediaQuery({query:\"(min-device-width: 768px)\"});const extractUrls=require(\"extract-urls\");let url=\"https://edition.cnn.com/2024/07/10/europe/russian-missile-strike-kyiv-hospital-un-intl-hnk/index.html\";const[urls,setUrls]=useState(post.thumb);const[thumbnail,setThumbnail]=useState('');//const [thumbnail, setThumbnail] = useState('/images/16251726578112.jpeg');\nvar cover=true;// State for controlling popup visibility\nconst{user:currentUser,dispatch}=useContext(AuthContext);const PF=process.env.REACT_APP_PUBLIC_FOLDER;const[isHovered,setIsHovered]=useState(false);const[isDisHovered,setIsDisHovered]=useState(false);useEffect(()=>{// Check if the post is new\nsetIsNew(post.createdAt?false:true);// Define the function to fetch the thumbnail\nconst handleFetchThumbnail=async()=>{if(!post.thumb){console.log(\"No thumbnail URL provided.\");return;}try{const token=localStorage.getItem('token');const response=await axios.post('/posts/fetch-thumbnail',{urls:post.thumb,headers:{'auth-token':token}});setThumbnail(response.data.thumbnail);}catch(error){console.error('Error fetching thumbnail:',error);}};// Fetch thumbnail only if there is a thumbnail URL and it hasn't been fetched already\nif(post.thumb&&!thumbnail){handleFetchThumbnail();}},[post.thumb,thumbnail]);const handleMouseEnter=e=>{setIsHovered(true);};const handleMouseLeave=e=>{setIsHovered(false);};const handleDisMouseEnter=e=>{setIsDisHovered(true);};const handleDisMouseLeave=e=>{setIsDisHovered(false);};const onButtonClick=()=>{// `current` points to the mounted text input element\ninputEl.current.focus();};//console.log(\"here is the url\")\n//console.log(PF)\n/*const fetchComments = async () => {\n    console.log(\"fetchComments\")\n    const res = await axios.get( + user._id+`?page=${index}`);\n    console.log(res.data)\n    console.log(\"fetch posts\")\n    if(res.data.length > 0){\n      setPosts((prevItems) => [...prevItems, ...res.data\n      //.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n      ]); \n    res.data.length > 0 ? setHasMore(true) : setHasMore(false);\n      //setIndex((index) => index + 1);\n      increment(index, 1);\n    } else {\n      //setPosts([]);\n      //setIndex((index) => 0);\n      //increment(index, -index);\n    }\n\n      //setPreFilter(whPosts);\n      console.log(whPosts);\n      //setPosts(res.data.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})); \n  };*/useEffect(()=>{//setIsLiked(post.likes.includes(currentUser._id));\n//setIsLikedByOne(post.likes.length == 1)\n//setIsDisliked(post.dislikes.includes(currentUser._id));\n//setIsDislikedByOne(post.dislikes.length == 1)\nsetComments(post.comments);},[currentUser._id,post.likes,post.dislikes]);useEffect(()=>{const token=localStorage.getItem('token');const fetchUser=async()=>{const res=await axios.get(\"/users?userId=\".concat(post.userId),{headers:{'auth-token':token}});setUser(res.data);};const fetchLastRepostUser=async()=>{console.log(\"repostId\");console.log(post.reposts[post.reposts.length-1]);const res=await axios.get(\"/users?userId=\".concat(post.reposts[post.reposts.length-1]),{headers:{'auth-token':token}});setRepostUser(res.data);};//console.log(post.comments.length)\nfetchUser();if(post.reposts.length>0){fetchLastRepostUser();}},[]);useEffect(()=>{const handleClickOutside=event=>{if(ref.current&&!ref.current.contains(event.target)){setIsVisible(true);}};document.addEventListener(\"click\",handleClickOutside,false);return()=>{document.removeEventListener(\"click\",handleClickOutside,false);};},[]);function handleChange(text){setInputValue(text);console.log(\"enter\",text);}const handleReadChange=()=>{const token=localStorage.getItem('token');axios.put(\"/users/\"+currentUser._id+\"/read\",{postId:post._id,headers:{'auth-token':token}});};function handleOnEnter(text){console.log(\"enter\",text);}// postDetails\nconst postDetailsHandler=async e=>{e.preventDefault();};// submit a comment\nconst onEnterSubmitHandler=async()=>{const token=localStorage.getItem('token');//setInputValue(prevValue => prevValue + \"\\n\");\nconsole.log(removeHtmlTags(inputValue).trim().length);console.log(\"currentUser\");console.log(currentUser);if(removeHtmlTags(inputValue).trim().length!=0){try{setInputValue('');const lc=await axios.post(\"/posts/\"+post._id+\"/comment\",{userId:currentUser._id,username:currentUser.username,txt:inputValue,postId:post._id,headers:{'auth-token':token}});console.log(\"Posted a comment\");console.log(lc.data);//setComments([...comments, lc.data]);\n//post.comments([...comments, lc.data]);\nsetComments(prevItems=>[...prevItems,lc.data]);setInputValue('');const po=await axios.get(\"/posts/\"+post._id,{headers:{'auth-token':token}});console.log(\"post\");console.log(po.data);console.log(post);setCurrentPost(po.data);// refresh the page after posting something\n//window.location.reload();\n}catch(err){console.log(\"Posted a comment\");console.log(err);}}};const submitHandler2=async e=>{e.preventDefault();};// submit a comment\nconst submitHandler=async e=>{e.preventDefault();const token=localStorage.getItem('token');console.log(removeHtmlTags(inputValue).trim().length);console.log(\"currentUser\");console.log(currentUser);if(removeHtmlTags(inputValue).trim().length!=0){const newComment={userId:user._id,description:inputValue};console.log(newComment);try{setInputValue('');const lc=await axios.post(\"/posts/\"+post._id+\"/comment\",{userId:currentUser._id,username:currentUser.username,txt:inputValue,postId:post._id,headers:{'auth-token':token}});console.log(\"Posted a comment\");console.log(lc.data);//setComments([...comments, lc.data]);\n//post.comments([...comments, lc.data]);\nsetComments(prevItems=>[...prevItems,lc.data]);setInputValue('');const po=await axios.get(\"/posts/\"+post._id,{headers:{'auth-token':token}});console.log(\"post\");console.log(po.data);console.log(post);setCurrentPost(po.data);// refresh the page after posting something\n//window.location.reload();\n}catch(err){console.log(\"Posted a comment\");setInputValue('');console.log(err);}}};/*const likeHandler = () => {\n    try {\n      axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n    } catch (err) { }\n    setLike(isLiked ? like - 1 : like + 1);\n    setIsLiked(!isLiked);\n    if (post.likes.length == 1){\n      setIsLikedByOne(false);\n    }\n  };*/const repostHandler=async()=>{const token=localStorage.getItem('token');try{axios.post(\"/posts/\"+post._id+\"/repost\",{userId:currentUser._id,headers:{'auth-token':token}});}catch(err){console.log(err);}setRepost(isReposted?repost+1:repost+1);setIsReposted(true);};function getTextLength(text){// Regular expression to match URLs starting with \"http://\" or \"https://\"\nconst urlRegex=/(https?:\\/\\/\\S+)/g;// Remove URLs from the text\nconst textWithoutUrls=text.replace(urlRegex,'');// Calculate the length of the text without URLs\nconst lengthWithoutUrls=textWithoutUrls.length;return lengthWithoutUrls;}const likeHandler=async()=>{//if(!isDisliked){\nconst token=localStorage.getItem('token');try{const p=await axios.put(\"/posts/\"+post._id+\"/like\",{userId:currentUser._id,headers:{'auth-token':token}});console.log(\"likeHandler\");console.log(p);//console.log(p.data.likes.length);\n//if(p.data.likes.length > 0){\nconst vl=Number(like)+p.data.likes;if(vl<0){setLike(0);}else{setLike(vl);}const vl2=Number(dislike)+p.data.dislikes;if(vl2<0){setDislike(0);}else{setDislike(vl2);}//}else{\n//  setLike(0);\n//}\n//if(p.data.dislikes.length > 0){\n//}else{\n// setDislike(0);\n//}\n}catch(err){console.log(err);}//if (p.likes.length == 1){\n//  setIsLikedByOne(false);\n//}\n/* }else{\n      try {\n        const totLikes = axios.put(\"/posts/\" + post._id + \"/dislike\", { userId: currentUser._id });\n\n        console.log(totLikes.length);\n        setDislike(totLikes.length);\n        if(totLikes.length > 0){\n          setIsDisliked(totLikes.includes(currentUser._id));}else{setIsDisliked(false);}\n      } catch (err) {console.log(err);}\n  }*/};const dislikeHandler=async()=>{//if(!isLiked){\nconst token=localStorage.getItem('token');try{const p=await axios.put(\"/posts/\"+post._id+\"/dislike\",{userId:currentUser._id,headers:{'auth-token':token}});console.log(\"dislike Handler\");console.log(p);//if(p.data.likes.length > 0){\nconst vl=Number(like)+p.data.likes;if(vl<0){setLike(0);}else{setLike(vl);}const vl2=Number(dislike)+p.data.dislikes;if(vl2<0){setDislike(0);}else{setDislike(vl2);}//}else{\n//  setLike(0);\n//}\n//if(p.data.dislikes.length > 0){\n//setDislike(p.data.dislikes.length);\n//}else{\n//    setDislike(0);\n//}\n}catch(err){console.log(err);}//if (p.dislikes.length == 1){\n//  setIsDislikedByOne(false);\n//}\n/* }else{\n    setIsLiked(false);\n\n    try {\n      const totLikes = axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n\n      console.log(totLikes.length);\n      setLike(totLikes.length);\n      if(totLikes.length > 0){\n        setIsLiked(totLikes.includes(currentUser._id));}else{setIsLiked(false);}\n\n    } catch (err) { console.log(err);\n    }\n  }*/};const toggleWebView=()=>{toast.info(/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:'90vw',// Adjust width of container\nheight:'80vh',// Adjust height of container\noverflow:'auto',// Allow scrolling in both axes\nmaxWidth:'100%',// Ensure the container scales\nmaxHeight:'100%',// Ensure the container scales\nzIndex:9999// Ensure the toast appears on top of other UI elements\n},children:[/*#__PURE__*/_jsx(\"iframe\",{src:\"https://socialapp2.ijs.si/news/zelensky\",title:\"WebView\",style:{width:'100%',height:'100%',minWidth:'1000px',// Ensure iframe is wide enough to scroll\nminHeight:'100%',// Ensure iframe takes full height\nborder:'none',display:'block',// Removes unwanted spacing\nborderRadius:'10px',// Optional: Add rounded corners\noverflow:'auto',// Allow scrolling in the iframe\nzIndex:1000// Ensure iframe is above other UI elements\n}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setWebViewVisible(false),style:{position:'absolute',top:'10px',right:'10px',padding:'8px 12px',backgroundColor:'red',color:'white',border:'none',cursor:'pointer',zIndex:1001,// Ensure button is above the iframe\nborderRadius:'5px'},children:\"X\"})]}),{position:\"top-center\",autoClose:false,// Prevent auto-close\nhideProgressBar:true,closeButton:false,// Disable default close button\nclassName:\"webview-toast-container\"// Optionally add custom class for styling\n});};const showCommentsHandler=()=>{var bottomdiv=document.getElementsByClassName(\"form\");bottomdiv.style.display=\"none\";};function removeHtmlTags(text){// Regular expression to match HTML tags\nconst htmlRegex=/<[^>]*>/g;// Remove HTML tags from the text\nconst textWithoutHtml=text.replace(htmlRegex,'');return textWithoutHtml;}const triangleStyle={position:\"relative\",margin:isDetail&&\"5px 0\",background:\"#F5F5F5\"};const triangleOverlayStyle={content:'\"\"',position:\"absolute\",top:0,left:0,width:0,height:0,borderLeft:isNew&&\"50px solid blue\",// Adjust size as needed\nborderBottom:\"50px solid transparent\"// Adjust size as needed\n};function handleViewedChange(view,post){/*if(view == true){\n    console.log(\"view \", view);\n    onScrolling(post._id);\n    }*/}//<img src={PF + post.img} alt=\"\" className={classes.postImg} />\n//to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}` }\n// to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}`}\n//to={isDetail? `/profile/${user.username}`: `/profile/${user.username}` }\n//to={isDetail? `/profile/${user.username}`: `/profile/${user.username}`}\n//\nreturn/*#__PURE__*/_jsx(InView,{as:\"div\",onChange:(inView,entry)=>handleViewedChange(inView,post),children:/*#__PURE__*/_jsx(\"div\",{className:classes.post,style:{position:\"relative\",margin:isDetail&&\"5px 0\",background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postWrapper,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(\"div\",{style:triangleOverlayStyle}),/*#__PURE__*/_jsx(\"div\",{className:classes.postTop,style:{background:repost>0?\"#ffffff\":\"#ffffff\"},children:repost>0?/*#__PURE__*/_jsxs(\"div\",{className:classes.postTopLeft,children:[/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor},children:/*#__PURE__*/_jsx(\"img\",{src:repostUser.profilePicture?PF+repostUser.profilePicture:PF+'person/noAvatar.png',alt:\"\",className:classes.postProfileImg})}),/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor,cursor:'default'},children:/*#__PURE__*/_jsx(\"span\",{className:classes.postUsername,children:repostUser.username})}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDate,children:format(post.updatedAt)}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDate,style:{margin:'0px 0px 0px 20px'},children:\" Reposted by: \"+repost})]}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsx(\"div\",{className:classes.postTop,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postTopLeft,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor,background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsx(\"img\",{src:user.profilePicture?PF+user.profilePicture:PF+'person/noAvatar.png',alt:\"\",className:classes.postProfileImg})}),/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor,cursor:'default',background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsx(\"span\",{className:classes.postUsername,children:user.username})}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDate,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:format(post.createdAt)})]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.postCenter,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsx(Linkify,{componentDecorator:(decoratedHref,decoratedText,key)=>/*#__PURE__*/_jsxs(\"a\",{target:\"blank\",rel:\"noopener noreferrer\",href:decoratedHref,children:[\" \",decoratedText,\" \"]},key),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postText,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.postText,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},dangerouslySetInnerHTML:{__html:post===null||post===void 0?void 0:post.desc}}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleWebView,style:{display:'inline-block',verticalAlign:'middle',padding:'0px 20px',margin:'0px 20px'},children:\"Read full article\"}),thumbnail&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"20px\",background:repost>0?\"#F5F5F5\":\"#ffffff\",display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(\"img\",{src:thumbnail,alt:\"Thumbnail\",style:{width:'100%',maxWidth:'600px',height:'auto',cursor:'default'}})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.postBottom,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.postBottomLeft,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(PF,\"clike.png\"),alt:\"\",className:classes.likeIcon,onClick:likeHandler}),/*#__PURE__*/_jsx(\"span\",{className:classes.postLikeCounter,children:like}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(PF,\"cdislike.png\"),alt:\"\",className:classes.likeIcon,onClick:dislikeHandler}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDislikeCounter,children:dislike}),/*#__PURE__*/_jsx(\"form\",{class:\"form\",children:/*#__PURE__*/_jsx(SendIcon,{className:classes.sendButton2,style:{display:\"flex\",margin:\"0px 20px\"},type:\"submit\",onClick:submitHandler2})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.postBottomRight,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsxs(Link,{style:{textDecoration:'none',color:COLORS.textColor},to:{pathname:\"/postdetail/\".concat(user.username),state:{myObj:currentPost}},children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:classes.postCommentText,children:[comments.length,\" \",\"Kommentare\"]})]})})]}),isDetail&&/*#__PURE__*/_jsxs(\"div\",{ref:ref,className:classes.commentsWrapper,style:{display:isVisible?\"block\":\"none\",background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(\"hr\",{className:classes.shareHr}),/*#__PURE__*/_jsxs(\"div\",{className:classes.txtnButtonRight,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.smallAvatar,src:currentUser.profilePicture?PF+currentUser.profilePicture:PF+\"person/noAvatar.png\",style:{background:repost>0?\"#ffffff\":\"#ffffff\"}}),title:/*#__PURE__*/_jsx(InputEmoji,{className:classes.shareInput,style:{fontSize:\"15\",height:\"40px\",background:repost>0?\"#ffffff\":\"#ffffff\"},shouldReturn:true,value:inputValue,onChange:handleChange,onEnter:onEnterSubmitHandler,placeholder:Write_something}),className:classes.cardHeader,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"}}),/*#__PURE__*/_jsx(\"form\",{class:\"form\",children:/*#__PURE__*/_jsx(SendIcon,{className:classes.sendButton2,style:{display:\"flex\",margin:\"0px 20px\"},type:\"submit\",onClick:submitHandler})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.commentTop,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:comments.slice(0).reverse().map((item,i)=>{console.log(i);console.log(item._id);//return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\nif(isDetail===false&&i<1){return/*#__PURE__*/_jsx(CommentSA,{post:post,comment:item,isDetail:false},item._id);}else if(isDetail===true){return/*#__PURE__*/_jsx(CommentSA,{post:post,comment:item,isDetail:false},item._id);}})})]})]})})});}export default withStyles(styles)(Post);","map":{"version":3,"names":["useContext","useEffect","useState","useRef","format","AuthContext","Icon","axios","MoreVert","ArrowForwardIcon","Link","withStyles","styles","CardHeader","TextField","Avatar","CommentSA","Button","Stack","Linkify","SendIcon","useMediaQuery","InputEmoji","MoodIcon","React","LinkPreview","InView","COLORS","linkifyit","Write_something","comments","toast","jsx","_jsx","jsxs","_jsxs","Post","_ref","onScrolling","post","classes","isDetail","setComments","inputEl","HTMLInputElement","like","setLike","likes","length","dislike","setDislike","dislikes","isLiked","setIsLiked","isDisliked","setIsDisliked","isLikedByOne","setIsLikedByOne","isDislikedByOne","setIsDislikedByOne","currentPost","setCurrentPost","repost","setRepost","reposts","repostUser","setRepostUser","repostId","setRepostId","rank","setRank","parseFloat","toFixed","isReposted","setIsReposted","webViewVisible","setWebViewVisible","webViewUrl","setWebViewUrl","isNew","setIsNew","user","setUser","text","setText","inputValue","setInputValue","linkify","isVisible","setIsVisible","ref","desc","isMobileDevice","query","isTabletDevice","extractUrls","require","url","urls","setUrls","thumb","thumbnail","setThumbnail","cover","currentUser","dispatch","PF","process","env","REACT_APP_PUBLIC_FOLDER","isHovered","setIsHovered","isDisHovered","setIsDisHovered","createdAt","handleFetchThumbnail","console","log","token","localStorage","getItem","response","headers","data","error","handleMouseEnter","e","handleMouseLeave","handleDisMouseEnter","handleDisMouseLeave","onButtonClick","current","focus","_id","fetchUser","res","get","concat","userId","fetchLastRepostUser","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","handleChange","handleReadChange","put","postId","handleOnEnter","postDetailsHandler","preventDefault","onEnterSubmitHandler","removeHtmlTags","trim","lc","username","txt","prevItems","po","err","submitHandler2","submitHandler","newComment","description","repostHandler","getTextLength","urlRegex","textWithoutUrls","replace","lengthWithoutUrls","likeHandler","p","vl","Number","vl2","dislikeHandler","toggleWebView","info","style","position","width","height","overflow","maxWidth","maxHeight","zIndex","children","src","title","minWidth","minHeight","border","display","borderRadius","onClick","top","right","padding","backgroundColor","color","cursor","autoClose","hideProgressBar","closeButton","className","showCommentsHandler","bottomdiv","getElementsByClassName","htmlRegex","textWithoutHtml","triangleStyle","margin","background","triangleOverlayStyle","content","left","borderLeft","borderBottom","handleViewedChange","view","as","onChange","inView","entry","postWrapper","postTop","postTopLeft","textDecoration","textColor","profilePicture","alt","postProfileImg","postUsername","postDate","updatedAt","postCenter","componentDecorator","decoratedHref","decoratedText","key","rel","href","postText","dangerouslySetInnerHTML","__html","verticalAlign","marginTop","justifyContent","alignItems","postBottom","postBottomLeft","likeIcon","postLikeCounter","postDislikeCounter","class","sendButton2","type","postBottomRight","to","pathname","state","myObj","postCommentText","commentsWrapper","shareHr","txtnButtonRight","avatar","smallAvatar","shareInput","fontSize","shouldReturn","value","onEnter","placeholder","cardHeader","commentTop","slice","reverse","map","item","i","comment"],"sources":["/home/group4/TWON_STA_Case_Study/client/src/components/post/Post.js"],"sourcesContent":["\nimport { useContext, useEffect, useState, useRef } from \"react\";\nimport { format } from 'timeago.js'\nimport { AuthContext } from \"../../context/AuthContext\";\nimport Icon from '@material-ui/core/Icon'\nimport axios from \"axios\"\nimport { MoreVert } from '@material-ui/icons';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport { styles } from './postStyle'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport TextField from '@material-ui/core/TextField'\nimport Avatar from '@material-ui/core/Avatar'\nimport CommentSA from '../comment/commentSA';\nimport PropTypes from 'prop-types';\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport Linkify from 'react-linkify';\nimport SendIcon from '@mui/icons-material/Send';\nimport { useMediaQuery } from 'react-responsive';\n//import 'emoji-mart/css/emoji-mart.css';\nimport InputEmoji from \"react-input-emoji\";\nimport MoodIcon from '@mui/icons-material/Mood';\nimport React from 'react';\nimport { LinkPreview } from '@dhaiwat10/react-link-preview';\nimport { InView } from 'react-intersection-observer';\nimport { COLORS } from \"../values/colors\";\nimport linkifyit from 'linkify-it';\nimport { Write_something, comments } from '../../constants';\nimport './post.css';\nimport { toast } from 'react-toastify';\n//import User from \"../../../../server/models/User\";\n\nfunction Post({onScrolling,  post, classes, isDetail }) {\n  const [comments, setComments] = useState([]);\n  const inputEl = React.useRef<HTMLInputElement>(null);\n  //console.log(post);\n  const [like, setLike] = useState(post.likes.length);\n  const [dislike, setDislike] = useState(post.dislikes.length);\n  const [isLiked, setIsLiked] = useState(false);\n  const [isDisliked, setIsDisliked] = useState(false);\n  const [isLikedByOne, setIsLikedByOne] = useState(false);\n  const [isDislikedByOne, setIsDislikedByOne] = useState(false);\n  \n  const [currentPost, setCurrentPost] = useState(post);\n\n  const [repost, setRepost] = useState(post.reposts? post.reposts.length: 0);\n  const [repostUser, setRepostUser] = useState({});\n  const [repostId, setRepostId] = useState(post.reposts[post.reposts? post.reposts.length: 0]);\n  \n  \n  const [rank, setRank] = useState(parseFloat(post.rank.toFixed(2)));//useState(post.reposts? post.reposts.length: 0);\n\n  const [isReposted, setIsReposted] = useState(false);\n  const [webViewVisible, setWebViewVisible] = useState(false);\nconst [webViewUrl, setWebViewUrl] = useState('');\n\n  \n  const [isNew, setIsNew] = useState(false);\n\n  const [user, setUser] = useState({});\n  const [text, setText] = useState('');\n  const [inputValue, setInputValue] = useState(\"\");\n  const linkify = linkifyit();\n  \n  const [isVisible, setIsVisible] = useState(true);\n  const ref = useRef(null);\n  const desc = useRef();\n  const isMobileDevice = useMediaQuery({ query: \"(min-device-width: 480px)\"});\n  const isTabletDevice = useMediaQuery({ query: \"(min-device-width: 768px)\"});\n  const extractUrls = require(\"extract-urls\");\n  let url = \"https://edition.cnn.com/2024/07/10/europe/russian-missile-strike-kyiv-hospital-un-intl-hnk/index.html\"\n  const [urls, setUrls] = useState(post.thumb);\n  const [thumbnail, setThumbnail] = useState('');\n  //const [thumbnail, setThumbnail] = useState('/images/16251726578112.jpeg');\n  var cover = true;\n  // State for controlling popup visibility\n  \n  \n\n  const { user: currentUser, dispatch } = useContext(AuthContext);\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const [isHovered, setIsHovered] = useState(false);\n  const [isDisHovered, setIsDisHovered] = useState(false);\n  \n useEffect(() => {\n  // Check if the post is new\n  setIsNew(post.createdAt ? false : true);\n\n  // Define the function to fetch the thumbnail\n  const handleFetchThumbnail = async () => {\n    if (!post.thumb) {\n      console.log(\"No thumbnail URL provided.\");\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post('/posts/fetch-thumbnail', { \n        urls: post.thumb, \n        headers: { 'auth-token': token }\n      });\n      setThumbnail(response.data.thumbnail);\n    } catch (error) {\n      console.error('Error fetching thumbnail:', error);\n    }\n  };\n\n  // Fetch thumbnail only if there is a thumbnail URL and it hasn't been fetched already\n  if (post.thumb && !thumbnail) {\n    handleFetchThumbnail();\n  }\n}, [post.thumb, thumbnail]);\n  \n      const handleMouseEnter = e => {\n        setIsHovered(true);\n      };\n\n      const handleMouseLeave = e => {\n        setIsHovered(false);\n      };\n\n      const handleDisMouseEnter = e => {\n        setIsDisHovered(true);\n      };\n\n      const handleDisMouseLeave = e => {\n        setIsDisHovered(false);\n      };\n      \n      const onButtonClick = () => {\n        // `current` points to the mounted text input element\n        inputEl.current.focus();\n      };\n  //console.log(\"here is the url\")\n  //console.log(PF)\n    /*const fetchComments = async () => {\n    console.log(\"fetchComments\")\n    const res = await axios.get( + user._id+`?page=${index}`);\n    console.log(res.data)\n    console.log(\"fetch posts\")\n    if(res.data.length > 0){\n      setPosts((prevItems) => [...prevItems, ...res.data\n      //.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n      ]); \n    res.data.length > 0 ? setHasMore(true) : setHasMore(false);\n      //setIndex((index) => index + 1);\n      increment(index, 1);\n    } else {\n      //setPosts([]);\n      //setIndex((index) => 0);\n      //increment(index, -index);\n    }\n\n      //setPreFilter(whPosts);\n      console.log(whPosts);\n      //setPosts(res.data.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})); \n  };*/\n\n\n  useEffect(() => {\n    //setIsLiked(post.likes.includes(currentUser._id));\n    //setIsLikedByOne(post.likes.length == 1)\n    //setIsDisliked(post.dislikes.includes(currentUser._id));\n    //setIsDislikedByOne(post.dislikes.length == 1)\n    setComments(post.comments);\n\n  }, [currentUser._id, post.likes, post.dislikes]);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const fetchUser = async () => {\n      const res = await axios.get(`/users?userId=${post.userId}`, {headers: { 'auth-token': token }})\n      setUser(res.data);\n    };\n    \n    const fetchLastRepostUser = async () => {\n      console.log(\"repostId\")\n    console.log(post.reposts[post.reposts.length-1])\n      const res = await axios.get(`/users?userId=${post.reposts[post.reposts.length-1]}`, {headers: { 'auth-token': token }})\n      setRepostUser(res.data);\n    };\n  \n    \n    //console.log(post.comments.length)\n    fetchUser();\n    if(post.reposts.length > 0){\n      fetchLastRepostUser();\n    }\n  }, []);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (ref.current && !ref.current.contains(event.target)) {\n        setIsVisible(true);\n      }\n    };\n    document.addEventListener(\"click\", handleClickOutside, false);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside, false);\n    };\n  }, []);\n\n  function handleChange(text) {\n    setInputValue(text)\n    console.log(\"enter\", text);\n\n  }\n\n  const handleReadChange = () => {\n    const token = localStorage.getItem('token');\n      axios.put(\"/users/\" + currentUser._id + \"/read\", \n      { postId: post._id, \n        headers: { 'auth-token': token }\n      });\n  };\n\n  function handleOnEnter(text) {\n    console.log(\"enter\", text);\n  }\n\n  // postDetails\n  const postDetailsHandler = async (e) => {\n    e.preventDefault();\n  };\n\n\n  // submit a comment\n  const onEnterSubmitHandler = async () => {\n\n    const token = localStorage.getItem('token');\n    //setInputValue(prevValue => prevValue + \"\\n\");\n    console.log(removeHtmlTags(inputValue).trim().length);\n    console.log(\"currentUser\")\n    console.log(currentUser)\n    if(removeHtmlTags(inputValue).trim().length != 0){\n    try {\n      setInputValue('');\n      const lc = await axios.post(\"/posts/\" + post._id + \"/comment\", { userId: currentUser._id, username: currentUser.username, txt: inputValue, postId: post._id, headers: { 'auth-token': token } });\n      console.log(\"Posted a comment\");\n      console.log(lc.data)\n      //setComments([...comments, lc.data]);\n      //post.comments([...comments, lc.data]);\n      setComments((prevItems) => [...prevItems, lc.data]);\n      setInputValue('');\n      const po = await axios.get(\"/posts/\" + post._id, { headers: { 'auth-token': token } });\n      console.log(\"post\");\n      console.log(po.data);\n      console.log(post);\n      setCurrentPost(po.data);\n      // refresh the page after posting something\n      //window.location.reload();\n    } catch (err) { \n      console.log(\"Posted a comment\");\n      console.log(err); }\n  }\n};\n\nconst submitHandler2 = async (e) => {\n  e.preventDefault();\n  \n};\n\n\n  // submit a comment\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    console.log(removeHtmlTags(inputValue).trim().length);\n    console.log(\"currentUser\")\n    console.log(currentUser)\n    if(removeHtmlTags(inputValue).trim().length != 0){\n    const newComment = { userId: user._id, description: inputValue,};\n    console.log(newComment);\n    try {\n      setInputValue('');\n      const lc = await axios.post(\"/posts/\" + post._id + \"/comment\", { userId: currentUser._id, username: currentUser.username, txt: inputValue, postId: post._id, headers: { 'auth-token': token } });\n      console.log(\"Posted a comment\");\n      console.log(lc.data)\n      //setComments([...comments, lc.data]);\n      //post.comments([...comments, lc.data]);\n      setComments((prevItems) => [...prevItems, lc.data]);\n      setInputValue('');\n      const po = await axios.get(\"/posts/\" + post._id, { headers: { 'auth-token': token } });\n      console.log(\"post\");\n      console.log(po.data);\n      console.log(post);\n      setCurrentPost(po.data);\n      // refresh the page after posting something\n      //window.location.reload();\n    } catch (err) { \n      console.log(\"Posted a comment\");\n      setInputValue('');\n      console.log(err); }\n    }\n  };\n\n  /*const likeHandler = () => {\n    try {\n      axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n    } catch (err) { }\n    setLike(isLiked ? like - 1 : like + 1);\n    setIsLiked(!isLiked);\n    if (post.likes.length == 1){\n      setIsLikedByOne(false);\n    }\n  };*/\n\n\n  const repostHandler = async () => {\n    const token = localStorage.getItem('token');\n    try {\n      axios.post(\"/posts/\" + post._id + \"/repost\", { userId: currentUser._id , headers: { 'auth-token': token }});\n    } catch (err) {\n      console.log(err)\n     }\n    setRepost(isReposted ? repost + 1 : repost + 1);\n    setIsReposted(true);\n\n  };\n\n  function getTextLength(text) {\n    // Regular expression to match URLs starting with \"http://\" or \"https://\"\n    const urlRegex = /(https?:\\/\\/\\S+)/g;\n    \n    // Remove URLs from the text\n    const textWithoutUrls = text.replace(urlRegex, '');\n    \n    // Calculate the length of the text without URLs\n    const lengthWithoutUrls = textWithoutUrls.length;\n    \n    return lengthWithoutUrls;\n}\n\n  const likeHandler = async () => {\n    //if(!isDisliked){\n      const token = localStorage.getItem('token');\n      try {\n        const p = await axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id, headers: { 'auth-token': token } });\n        console.log(\"likeHandler\");\n        console.log(p);\n\n        //console.log(p.data.likes.length);\n        //if(p.data.likes.length > 0){\n        const vl = Number(like) + p.data.likes\n        if(vl < 0){setLike(0);}else{setLike(vl);}\n\n        const vl2 = Number(dislike) + p.data.dislikes\n        if(vl2 < 0){setDislike(0);}else{setDislike(vl2);}\n\n        //}else{\n        //  setLike(0);\n        //}\n        //if(p.data.dislikes.length > 0){\n        \n        //}else{\n           // setDislike(0);\n        //}\n        \n      } catch (err) { console.log(err); }\n    \n    //if (p.likes.length == 1){\n    //  setIsLikedByOne(false);\n    //}\n   /* }else{\n      try {\n        const totLikes = axios.put(\"/posts/\" + post._id + \"/dislike\", { userId: currentUser._id });\n\n        console.log(totLikes.length);\n        setDislike(totLikes.length);\n        if(totLikes.length > 0){\n          setIsDisliked(totLikes.includes(currentUser._id));}else{setIsDisliked(false);}\n      } catch (err) {console.log(err);}\n  }*/\n  };\n\n  const dislikeHandler = async () => {\n    //if(!isLiked){\n      const token = localStorage.getItem('token');\n    try {\n      const p = await axios.put(\"/posts/\" + post._id + \"/dislike\", { userId: currentUser._id, headers: { 'auth-token': token } });\n      console.log(\"dislike Handler\");\n        console.log(p);\n      //if(p.data.likes.length > 0){\n        const vl = Number(like) + p.data.likes\n        if(vl < 0){setLike(0);}else{setLike(vl);}\n\n        const vl2 = Number(dislike) + p.data.dislikes\n        if(vl2 < 0){setDislike(0);}else{setDislike(vl2);}\n\n      //}else{\n      //  setLike(0);\n\n      //}\n\n      //if(p.data.dislikes.length > 0){\n          //setDislike(p.data.dislikes.length);\n      //}else{\n      //    setDislike(0);\n      //}\n\n    } catch (err) {console.log(err);}\n    \n    //if (p.dislikes.length == 1){\n    //  setIsDislikedByOne(false);\n    //}\n /* }else{\n    setIsLiked(false);\n\n    try {\n      const totLikes = axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n\n      console.log(totLikes.length);\n      setLike(totLikes.length);\n      if(totLikes.length > 0){\n        setIsLiked(totLikes.includes(currentUser._id));}else{setIsLiked(false);}\n\n    } catch (err) { console.log(err);\n    }\n  }*/\n  };\n\n\n  const toggleWebView = () => {\n    toast.info(\n      <div\n        style={{\n          position: 'relative',\n          width: '90vw', // Adjust width of container\n          height: '80vh', // Adjust height of container\n          overflow: 'auto', // Allow scrolling in both axes\n          maxWidth: '100%', // Ensure the container scales\n          maxHeight: '100%', // Ensure the container scales\n          zIndex: 9999, // Ensure the toast appears on top of other UI elements\n        }}\n      >\n        {/* Iframe with content */}\n        <iframe\n          src=\"https://socialapp2.ijs.si/news/zelensky\"\n          title=\"WebView\"\n          style={{\n            width: '100%',\n            height: '100%',\n            minWidth: '1000px', // Ensure iframe is wide enough to scroll\n            minHeight: '100%', // Ensure iframe takes full height\n            border: 'none',\n            display: 'block', // Removes unwanted spacing\n            borderRadius: '10px', // Optional: Add rounded corners\n            overflow: 'auto', // Allow scrolling in the iframe\n            zIndex: 1000, // Ensure iframe is above other UI elements\n          }}\n        />\n  \n        {/* Close button aligned at the top-right corner */}\n        <button\n          onClick={() => setWebViewVisible(false)}\n          style={{\n            position: 'absolute',\n            top: '10px',\n            right: '10px',\n            padding: '8px 12px',\n            backgroundColor: 'red',\n            color: 'white',\n            border: 'none',\n            cursor: 'pointer',\n            zIndex: 1001, // Ensure button is above the iframe\n            borderRadius: '5px',\n          }}\n        >\n          X\n        </button>\n      </div>,\n      {\n        position: \"top-center\",\n        autoClose: false, // Prevent auto-close\n        hideProgressBar: true,\n        closeButton: false, // Disable default close button\n        className: \"webview-toast-container\", // Optionally add custom class for styling\n      }\n    );\n  };\n\n\n  const showCommentsHandler = () => {\n    var bottomdiv = document.getElementsByClassName(\"form\")\n    bottomdiv.style.display=\"none\";\n  }\n\n  function removeHtmlTags(text) {\n    // Regular expression to match HTML tags\n    const htmlRegex = /<[^>]*>/g;\n    \n    // Remove HTML tags from the text\n    const textWithoutHtml = text.replace(htmlRegex, '');\n    \n    return textWithoutHtml;\n}\n\nconst triangleStyle = {\n  position: \"relative\",\n  margin: isDetail && \"5px 0\",\n  background:  \"#F5F5F5\" \n};\n\nconst triangleOverlayStyle = {\n  content: '\"\"',\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  width: 0,\n  height: 0,\n  borderLeft: isNew && \"50px solid blue\", // Adjust size as needed\n  borderBottom: \"50px solid transparent\" // Adjust size as needed\n};\n\n\n  function handleViewedChange(view, post) {\n    /*if(view == true){\n    console.log(\"view \", view);\n    onScrolling(post._id);\n    }*/\n  }\n  //<img src={PF + post.img} alt=\"\" className={classes.postImg} />\n  //to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}` }\n  // to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}`}\n  //to={isDetail? `/profile/${user.username}`: `/profile/${user.username}` }\n  //to={isDetail? `/profile/${user.username}`: `/profile/${user.username}`}\n  //\n\n  return (\n    <InView as=\"div\" onChange={(inView, entry) => handleViewedChange(inView, post)}>\n    <div className={classes.post} style={{ position: \"relative\", margin: isDetail && \"5px 0\",  background: repost>0 ? \"#F5F5F5\" : \"#ffffff\"}}  >\n      <div className={classes.postWrapper} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n      \n\n      <div style={triangleOverlayStyle}></div>\n        <div className={classes.postTop} style={{ background: repost>0 ? \"#ffffff\" : \"#ffffff\" }}>\n        {(repost > 0)? \n          <div className={classes.postTopLeft}>\n            <Link  style={{textDecoration: 'none', color: COLORS.textColor}} >\n              <img src={repostUser.profilePicture ? PF + repostUser.profilePicture : PF + 'person/noAvatar.png'} alt=\"\" className={classes.postProfileImg} />\n            </Link>\n            <Link style={{textDecoration: 'none', color: COLORS.textColor, cursor:'default'}}>\n            <span className={classes.postUsername}>{repostUser.username}</span>\n            </Link>\n            <span className={classes.postDate}>{format(post.updatedAt)}</span>\n            <span className={classes.postDate} style={{margin: '0px 0px 0px 20px',}}>{\" Reposted by: \"+ repost}</span>\n          \n          </div>: <div></div>}\n          { /*(repost > 0)? \n          <div className={classes.postTopRight}>\n          <Link style={{textDecoration: 'none', color: COLORS.textColor}} onClick={repostHandler}>\n            \n          { (isMobileDevice && isTabletDevice) ? <Stack direction=\"row\" spacing={2}>\n            <Button variant=\"contained\" endIcon={<SendIcon />}> Repost </Button></Stack> :<ArrowForwardIcon /> }  </Link></div>: <div></div>*/}\n\n        </div>\n        \n        <div className={classes.postTop} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n        \n          <div className={classes.postTopLeft} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            <Link  style={{textDecoration: 'none', color: COLORS.textColor, background: repost>0 ? \"#F5F5F5\" : \"#ffffff\"}} >\n              <img src={user.profilePicture ? PF + user.profilePicture : PF + 'person/noAvatar.png'} alt=\"\" className={classes.postProfileImg} />\n            </Link>\n            <Link style={{textDecoration: 'none', color: COLORS.textColor, cursor:'default', background: repost>0 ? \"#F5F5F5\" : \"#ffffff\"}} >\n            <span className={classes.postUsername}>\n              {user.username}\n            </span>\n            </Link>\n            <span className={classes.postDate} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>{format(post.createdAt)}</span>\n            {/*<span className={classes.postDate} style={{margin: '0px 0px 0px 20px',}}>{\" Reposted by: \"+ repost}</span>*/}\n          </div>\n          \n          { /*(repost < 1)?\n          <div className={classes.postTopRight} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n          <Link style={{textDecoration: 'none', color: COLORS.textColor}} onClick={repostHandler}>\n            \n          { (isMobileDevice && isTabletDevice) ? <Stack direction=\"row\" spacing={2}>\n            <Button variant=\"contained\" endIcon={<SendIcon />}> Repost </Button></Stack> :<ArrowForwardIcon /> }  </Link></div>: <div></div>\n  */}\n\n        </div>\n        \n        <div className={classes.postCenter} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n        <Linkify componentDecorator={(decoratedHref, decoratedText, key) => (<a target=\"blank\" rel=\"noopener noreferrer\" href={decoratedHref} key={key} > {decoratedText} </a>)}>\n          <div className={classes.postText}  style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            {/*!isDetail && post?.desc.length > 0? */}\n              <div className={classes.postText}  style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }} dangerouslySetInnerHTML={{ __html: post?.desc }}> \n              \n                  {/*<Link to={{pathname:`/postdetail/${user.username}`, state:{myObj: currentPost}}}></Link>*/}\n                </div>\n            {<button \n                onClick={toggleWebView} \n                style={{ display: 'inline-block', verticalAlign: 'middle', padding: '0px 20px', margin: '0px 20px'}}>\n                Read full article\n            </button>}\n            {/*}:\n            <div className={classes.postText}  style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }} dangerouslySetInnerHTML={{ __html: post?.desc }}>\n             </div>}*/}\n            \n            \n            {thumbnail && (\n              <div  style={{ marginTop:\"20px\", background: repost>0 ? \"#F5F5F5\" : \"#ffffff\", display: 'flex', justifyContent: 'center',alignItems: 'center',}}>\n                  <img src={thumbnail} alt=\"Thumbnail\" style={{ width: '100%', maxWidth: '600px', height: 'auto',cursor: 'default' }} />\n              </div>\n          )}\n           </div>\n        </Linkify>\n          \n          \n        </div>\n        <div className={classes.postBottom} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n          <div className={classes.postBottomLeft} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            <img src={`${PF}clike.png`} alt=\"\" className={classes.likeIcon} onClick={likeHandler} />\n            <span className={classes.postLikeCounter}>{like}</span>\n                  \n            <img src={`${PF}cdislike.png`} alt=\"\" className={classes.likeIcon} onClick={dislikeHandler} />\n            <span className={classes.postDislikeCounter}>{dislike}</span>\n            <form class = \"form\">\n            <SendIcon className={classes.sendButton2} style={{ display:\"flex\", margin:\"0px 20px\"}} type=\"submit\" onClick={submitHandler2}/>\n            </form>\n          </div>\n          <div className={classes.postBottomRight} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n          <Link style={{textDecoration: 'none', color: COLORS.textColor}} to={{pathname:`/postdetail/${user.username}`, state:{myObj: currentPost}}}> <div className={classes.postCommentText} >{comments.length} {\"Kommentare\"}</div></Link>\n          </div>\n        </div>\n        {isDetail && (\n        <div ref={ref} className={classes.commentsWrapper}  style={{ display: isVisible ? \"block\" : \"none\", background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n        <hr className={classes.shareHr} />\n        \n          <div className={classes.txtnButtonRight} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            <CardHeader\n              avatar={<Avatar className={classes.smallAvatar} src={currentUser.profilePicture? PF + currentUser.profilePicture: PF + \"person/noAvatar.png\"} style={{ background: repost>0 ? \"#ffffff\" : \"#ffffff\" }} />}\n              title={<InputEmoji className={classes.shareInput} style={{ fontSize: \"15\", height: \"40px\", background: repost>0 ? \"#ffffff\" : \"#ffffff\" }} shouldReturn={true} value={inputValue}  onChange={handleChange}  onEnter={onEnterSubmitHandler} placeholder={Write_something} />}\n              className={classes.cardHeader} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}/>\n\n            <form class = \"form\">\n              <SendIcon className={classes.sendButton2} style={{ display:\"flex\", margin:\"0px 20px\"}} type=\"submit\" onClick={submitHandler}/>\n            </form>\n            </div>\n            <div className={classes.commentTop} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            {comments.slice(0).reverse().map((item, i) => {\n              console.log(i);\n              console.log(item._id);\n                      //return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\n              if(isDetail===false && i < 1) {\n                  return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\n\n              } else if(isDetail === true) {\n                  return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\n                  \n              }\n              })\n            }\n        </div>\n        </div>)}\n      </div>\n    </div>\n    </InView>\n  )\n}\n\nPost.propTypes = {\n  post: PropTypes.object.isRequired,\n  onRemove: PropTypes.func.isRequired\n}\nexport default withStyles(styles)(Post);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}