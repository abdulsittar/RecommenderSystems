{"ast":null,"code":"import{useContext,useEffect,useState,useRef}from\"react\";import{format}from'timeago.js';import{AuthContext}from\"../../context/AuthContext\";import Icon from'@material-ui/core/Icon';import axios from\"axios\";import{MoreVert}from'@material-ui/icons';import ArrowForwardIcon from'@mui/icons-material/ArrowForward';import{Link}from'react-router-dom';import{withStyles}from'@material-ui/core/styles';import{styles}from'./postStyle';import CardHeader from'@material-ui/core/CardHeader';import TextField from'@material-ui/core/TextField';import Avatar from'@material-ui/core/Avatar';import CommentSA from'../comment/commentSA';import Button from'@mui/material/Button';import Stack from'@mui/material/Stack';import Linkify from'react-linkify';import SendIcon from'@mui/icons-material/Send';import{useMediaQuery}from'react-responsive';//import 'emoji-mart/css/emoji-mart.css';\nimport InputEmoji from\"react-input-emoji\";import MoodIcon from'@mui/icons-material/Mood';import React from'react';import{LinkPreview}from'@dhaiwat10/react-link-preview';import{InView}from'react-intersection-observer';import{COLORS}from\"../values/colors\";import linkifyit from'linkify-it';import{Write_something,comments}from'../../constants';import'./post.css';//import User from \"../../../../server/models/User\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Post(_ref){let{onScrolling,post,classes,isDetail}=_ref;const[comments,setComments]=useState([]);const inputEl=React.useRef<HTMLInputElement>null;//console.log(post);\nconst[like,setLike]=useState(post.likes.length);const[dislike,setDislike]=useState(post.dislikes.length);const[isLiked,setIsLiked]=useState(false);const[isDisliked,setIsDisliked]=useState(false);const[isLikedByOne,setIsLikedByOne]=useState(false);const[isDislikedByOne,setIsDislikedByOne]=useState(false);const[currentPost,setCurrentPost]=useState(post);const[repost,setRepost]=useState(post.reposts?post.reposts.length:0);const[repostUser,setRepostUser]=useState({});const[repostId,setRepostId]=useState(post.reposts[post.reposts?post.reposts.length:0]);const[rank,setRank]=useState(parseFloat(post.rank.toFixed(2)));//useState(post.reposts? post.reposts.length: 0);\nconst[isReposted,setIsReposted]=useState(false);const[webViewVisible,setWebViewVisible]=useState(false);const[webViewUrl,setWebViewUrl]=useState('');const[isNew,setIsNew]=useState(false);const[user,setUser]=useState({});const[text,setText]=useState('');const[inputValue,setInputValue]=useState(\"\");const linkify=linkifyit();const[isVisible,setIsVisible]=useState(true);const ref=useRef(null);const desc=useRef();const isMobileDevice=useMediaQuery({query:\"(min-device-width: 480px)\"});const isTabletDevice=useMediaQuery({query:\"(min-device-width: 768px)\"});const extractUrls=require(\"extract-urls\");let url=\"https://edition.cnn.com/2024/07/10/europe/russian-missile-strike-kyiv-hospital-un-intl-hnk/index.html\";const[urls,setUrls]=useState(post.thumb);const[thumbnail,setThumbnail]=useState('');//const [thumbnail, setThumbnail] = useState('/images/16251726578112.jpeg');\nvar cover=true;// State for controlling popup visibility\nconst{user:currentUser,dispatch}=useContext(AuthContext);const PF=process.env.REACT_APP_PUBLIC_FOLDER;const[isHovered,setIsHovered]=useState(false);const[isDisHovered,setIsDisHovered]=useState(false);useEffect(()=>{// Check if the post is new\nsetIsNew(post.createdAt?false:true);// Define the function to fetch the thumbnail\nconst handleFetchThumbnail=async()=>{if(!post.thumb){console.log(\"No thumbnail URL provided.\");return;}try{const token=localStorage.getItem('token');const response=await axios.post('/posts/fetch-thumbnail',{urls:post.thumb,headers:{'auth-token':token}});setThumbnail(response.data.thumbnail);}catch(error){console.error('Error fetching thumbnail:',error);}};// Fetch thumbnail only if there is a thumbnail URL and it hasn't been fetched already\nif(post.thumb&&!thumbnail){handleFetchThumbnail();}},[post.thumb,thumbnail]);const handleMouseEnter=e=>{setIsHovered(true);};const handleMouseLeave=e=>{setIsHovered(false);};const handleDisMouseEnter=e=>{setIsDisHovered(true);};const handleDisMouseLeave=e=>{setIsDisHovered(false);};const onButtonClick=()=>{// `current` points to the mounted text input element\ninputEl.current.focus();};//console.log(\"here is the url\")\n//console.log(PF)\n/*const fetchComments = async () => {\n    console.log(\"fetchComments\")\n    const res = await axios.get( + user._id+`?page=${index}`);\n    console.log(res.data)\n    console.log(\"fetch posts\")\n    if(res.data.length > 0){\n      setPosts((prevItems) => [...prevItems, ...res.data\n      //.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n      ]); \n    res.data.length > 0 ? setHasMore(true) : setHasMore(false);\n      //setIndex((index) => index + 1);\n      increment(index, 1);\n    } else {\n      //setPosts([]);\n      //setIndex((index) => 0);\n      //increment(index, -index);\n    }\n\n      //setPreFilter(whPosts);\n      console.log(whPosts);\n      //setPosts(res.data.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})); \n  };*/useEffect(()=>{//setIsLiked(post.likes.includes(currentUser._id));\n//setIsLikedByOne(post.likes.length == 1)\n//setIsDisliked(post.dislikes.includes(currentUser._id));\n//setIsDislikedByOne(post.dislikes.length == 1)\nsetComments(post.comments);},[currentUser._id,post.likes,post.dislikes]);useEffect(()=>{const token=localStorage.getItem('token');const fetchUser=async()=>{const res=await axios.get(\"/users?userId=\".concat(post.userId),{headers:{'auth-token':token}});setUser(res.data);};const fetchLastRepostUser=async()=>{console.log(\"repostId\");console.log(post.reposts[post.reposts.length-1]);const res=await axios.get(\"/users?userId=\".concat(post.reposts[post.reposts.length-1]),{headers:{'auth-token':token}});setRepostUser(res.data);};//console.log(post.comments.length)\nfetchUser();if(post.reposts.length>0){fetchLastRepostUser();}},[]);useEffect(()=>{const handleClickOutside=event=>{if(ref.current&&!ref.current.contains(event.target)){setIsVisible(true);}};document.addEventListener(\"click\",handleClickOutside,false);return()=>{document.removeEventListener(\"click\",handleClickOutside,false);};},[]);function handleChange(text){setInputValue(text);console.log(\"enter\",text);}const handleReadChange=()=>{const token=localStorage.getItem('token');axios.put(\"/users/\"+currentUser._id+\"/read\",{postId:post._id,headers:{'auth-token':token}});};function handleOnEnter(text){console.log(\"enter\",text);}// postDetails\nconst postDetailsHandler=async e=>{e.preventDefault();};// submit a comment\nconst onEnterSubmitHandler=async()=>{const token=localStorage.getItem('token');//setInputValue(prevValue => prevValue + \"\\n\");\nconsole.log(removeHtmlTags(inputValue).trim().length);console.log(\"currentUser\");console.log(currentUser);if(removeHtmlTags(inputValue).trim().length!=0){try{setInputValue('');const lc=await axios.post(\"/posts/\"+post._id+\"/comment\",{userId:currentUser._id,username:currentUser.username,txt:inputValue,postId:post._id,headers:{'auth-token':token}});console.log(\"Posted a comment\");console.log(lc.data);//setComments([...comments, lc.data]);\n//post.comments([...comments, lc.data]);\nsetComments(prevItems=>[...prevItems,lc.data]);setInputValue('');const po=await axios.get(\"/posts/\"+post._id,{headers:{'auth-token':token}});console.log(\"post\");console.log(po.data);console.log(post);setCurrentPost(po.data);// refresh the page after posting something\n//window.location.reload();\n}catch(err){console.log(\"Posted a comment\");console.log(err);}}};const submitHandler2=async e=>{e.preventDefault();};// submit a comment\nconst submitHandler=async e=>{e.preventDefault();const token=localStorage.getItem('token');console.log(removeHtmlTags(inputValue).trim().length);console.log(\"currentUser\");console.log(currentUser);if(removeHtmlTags(inputValue).trim().length!=0){const newComment={userId:user._id,description:inputValue};console.log(newComment);try{setInputValue('');const lc=await axios.post(\"/posts/\"+post._id+\"/comment\",{userId:currentUser._id,username:currentUser.username,txt:inputValue,postId:post._id,headers:{'auth-token':token}});console.log(\"Posted a comment\");console.log(lc.data);//setComments([...comments, lc.data]);\n//post.comments([...comments, lc.data]);\nsetComments(prevItems=>[...prevItems,lc.data]);setInputValue('');const po=await axios.get(\"/posts/\"+post._id,{headers:{'auth-token':token}});console.log(\"post\");console.log(po.data);console.log(post);setCurrentPost(po.data);// refresh the page after posting something\n//window.location.reload();\n}catch(err){console.log(\"Posted a comment\");setInputValue('');console.log(err);}}};/*const likeHandler = () => {\n    try {\n      axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n    } catch (err) { }\n    setLike(isLiked ? like - 1 : like + 1);\n    setIsLiked(!isLiked);\n    if (post.likes.length == 1){\n      setIsLikedByOne(false);\n    }\n  };*/const repostHandler=async()=>{const token=localStorage.getItem('token');try{axios.post(\"/posts/\"+post._id+\"/repost\",{userId:currentUser._id,headers:{'auth-token':token}});}catch(err){console.log(err);}setRepost(isReposted?repost+1:repost+1);setIsReposted(true);};function getTextLength(text){// Regular expression to match URLs starting with \"http://\" or \"https://\"\nconst urlRegex=/(https?:\\/\\/\\S+)/g;// Remove URLs from the text\nconst textWithoutUrls=text.replace(urlRegex,'');// Calculate the length of the text without URLs\nconst lengthWithoutUrls=textWithoutUrls.length;return lengthWithoutUrls;}const likeHandler=async()=>{//if(!isDisliked){\nconst token=localStorage.getItem('token');try{const p=await axios.put(\"/posts/\"+post._id+\"/like\",{userId:currentUser._id,headers:{'auth-token':token}});console.log(\"likeHandler\");console.log(p);//console.log(p.data.likes.length);\n//if(p.data.likes.length > 0){\nconst vl=Number(like)+p.data.likes;if(vl<0){setLike(0);}else{setLike(vl);}const vl2=Number(dislike)+p.data.dislikes;if(vl2<0){setDislike(0);}else{setDislike(vl2);}//}else{\n//  setLike(0);\n//}\n//if(p.data.dislikes.length > 0){\n//}else{\n// setDislike(0);\n//}\n}catch(err){console.log(err);}//if (p.likes.length == 1){\n//  setIsLikedByOne(false);\n//}\n/* }else{\n      try {\n        const totLikes = axios.put(\"/posts/\" + post._id + \"/dislike\", { userId: currentUser._id });\n\n        console.log(totLikes.length);\n        setDislike(totLikes.length);\n        if(totLikes.length > 0){\n          setIsDisliked(totLikes.includes(currentUser._id));}else{setIsDisliked(false);}\n      } catch (err) {console.log(err);}\n  }*/};const dislikeHandler=async()=>{//if(!isLiked){\nconst token=localStorage.getItem('token');try{const p=await axios.put(\"/posts/\"+post._id+\"/dislike\",{userId:currentUser._id,headers:{'auth-token':token}});console.log(\"dislike Handler\");console.log(p);//if(p.data.likes.length > 0){\nconst vl=Number(like)+p.data.likes;if(vl<0){setLike(0);}else{setLike(vl);}const vl2=Number(dislike)+p.data.dislikes;if(vl2<0){setDislike(0);}else{setDislike(vl2);}//}else{\n//  setLike(0);\n//}\n//if(p.data.dislikes.length > 0){\n//setDislike(p.data.dislikes.length);\n//}else{\n//    setDislike(0);\n//}\n}catch(err){console.log(err);}//if (p.dislikes.length == 1){\n//  setIsDislikedByOne(false);\n//}\n/* }else{\n    setIsLiked(false);\n\n    try {\n      const totLikes = axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n\n      console.log(totLikes.length);\n      setLike(totLikes.length);\n      if(totLikes.length > 0){\n        setIsLiked(totLikes.includes(currentUser._id));}else{setIsLiked(false);}\n\n    } catch (err) { console.log(err);\n    }\n  }*/};const toggleWebView=()=>{toast.info(/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"iframe\",{src:\"https://thebigsm.github.io/Fake_News_WebP/\",title:\"WebView\",style:{width:'100%',height:'400px',border:'none'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setWebViewVisible(false),children:\"Close\"})]}),{position:\"top-center\",autoClose:5000,// Auto-close after 5 seconds, adjust as needed\nhideProgressBar:true,closeButton:false// No close button for toast notification\n});};const showCommentsHandler=()=>{var bottomdiv=document.getElementsByClassName(\"form\");bottomdiv.style.display=\"none\";};function removeHtmlTags(text){// Regular expression to match HTML tags\nconst htmlRegex=/<[^>]*>/g;// Remove HTML tags from the text\nconst textWithoutHtml=text.replace(htmlRegex,'');return textWithoutHtml;}const triangleStyle={position:\"relative\",margin:isDetail&&\"5px 0\",background:\"#F5F5F5\"};const triangleOverlayStyle={content:'\"\"',position:\"absolute\",top:0,left:0,width:0,height:0,borderLeft:isNew&&\"50px solid blue\",// Adjust size as needed\nborderBottom:\"50px solid transparent\"// Adjust size as needed\n};function handleViewedChange(view,post){/*if(view == true){\n    console.log(\"view \", view);\n    onScrolling(post._id);\n    }*/}//<img src={PF + post.img} alt=\"\" className={classes.postImg} />\n//to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}` }\n// to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}`}\n//to={isDetail? `/profile/${user.username}`: `/profile/${user.username}` }\n//to={isDetail? `/profile/${user.username}`: `/profile/${user.username}`}\n//\nreturn/*#__PURE__*/_jsx(InView,{as:\"div\",onChange:(inView,entry)=>handleViewedChange(inView,post),children:/*#__PURE__*/_jsx(\"div\",{className:classes.post,style:{position:\"relative\",margin:isDetail&&\"5px 0\",background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postWrapper,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleWebView,children:\"Open WebView\"}),/*#__PURE__*/_jsx(\"div\",{style:triangleOverlayStyle}),/*#__PURE__*/_jsx(\"div\",{className:classes.postTop,style:{background:repost>0?\"#ffffff\":\"#ffffff\"},children:repost>0?/*#__PURE__*/_jsxs(\"div\",{className:classes.postTopLeft,children:[/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor},children:/*#__PURE__*/_jsx(\"img\",{src:repostUser.profilePicture?PF+repostUser.profilePicture:PF+'person/noAvatar.png',alt:\"\",className:classes.postProfileImg})}),/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor,cursor:'default'},children:/*#__PURE__*/_jsx(\"span\",{className:classes.postUsername,children:repostUser.username})}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDate,children:format(post.updatedAt)}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDate,style:{margin:'0px 0px 0px 20px'},children:\" Reposted by: \"+repost})]}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsx(\"div\",{className:classes.postTop,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postTopLeft,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor,background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsx(\"img\",{src:user.profilePicture?PF+user.profilePicture:PF+'person/noAvatar.png',alt:\"\",className:classes.postProfileImg})}),/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',color:COLORS.textColor,cursor:'default',background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsx(\"span\",{className:classes.postUsername,children:user.username})}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDate,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:format(post.createdAt)})]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.postCenter,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsx(Linkify,{componentDecorator:(decoratedHref,decoratedText,key)=>/*#__PURE__*/_jsxs(\"a\",{target:\"blank\",rel:\"noopener noreferrer\",href:decoratedHref,children:[\" \",decoratedText,\" \"]},key),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.postText,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[!isDetail&&(post===null||post===void 0?void 0:post.desc.length)>0?/*#__PURE__*/_jsx(\"div\",{className:classes.postText,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},dangerouslySetInnerHTML:{__html:post===null||post===void 0?void 0:post.desc}}):/*#__PURE__*/_jsx(\"div\",{className:classes.postText,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},dangerouslySetInnerHTML:{__html:post===null||post===void 0?void 0:post.desc}}),thumbnail&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"20px\",background:repost>0?\"#F5F5F5\":\"#ffffff\",display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(\"img\",{src:thumbnail,alt:\"Thumbnail\",style:{width:'100%',maxWidth:'600px',height:'auto',cursor:'default'}})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.postBottom,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.postBottomLeft,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(PF,\"clike.png\"),alt:\"\",className:classes.likeIcon,onClick:likeHandler}),/*#__PURE__*/_jsx(\"span\",{className:classes.postLikeCounter,children:like}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(PF,\"cdislike.png\"),alt:\"\",className:classes.likeIcon,onClick:dislikeHandler}),/*#__PURE__*/_jsx(\"span\",{className:classes.postDislikeCounter,children:dislike}),/*#__PURE__*/_jsx(\"form\",{class:\"form\",children:/*#__PURE__*/_jsx(SendIcon,{className:classes.sendButton2,style:{display:\"flex\",margin:\"0px 20px\"},type:\"submit\",onClick:submitHandler2})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.postBottomRight,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:/*#__PURE__*/_jsxs(Link,{style:{textDecoration:'none',color:COLORS.textColor},to:{pathname:\"/postdetail/\".concat(user.username),state:{myObj:currentPost}},children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:classes.postCommentText,children:[comments.length,\" \",\"Kommentare\"]})]})})]}),isDetail&&/*#__PURE__*/_jsxs(\"div\",{ref:ref,className:classes.commentsWrapper,style:{display:isVisible?\"block\":\"none\",background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(\"hr\",{className:classes.shareHr}),/*#__PURE__*/_jsxs(\"div\",{className:classes.txtnButtonRight,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(Avatar,{className:classes.smallAvatar,src:currentUser.profilePicture?PF+currentUser.profilePicture:PF+\"person/noAvatar.png\",style:{background:repost>0?\"#ffffff\":\"#ffffff\"}}),title:/*#__PURE__*/_jsx(InputEmoji,{className:classes.shareInput,style:{fontSize:\"15\",height:\"40px\",background:repost>0?\"#ffffff\":\"#ffffff\"},shouldReturn:true,value:inputValue,onChange:handleChange,onEnter:onEnterSubmitHandler,placeholder:Write_something}),className:classes.cardHeader,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"}}),/*#__PURE__*/_jsx(\"form\",{class:\"form\",children:/*#__PURE__*/_jsx(SendIcon,{className:classes.sendButton2,style:{display:\"flex\",margin:\"0px 20px\"},type:\"submit\",onClick:submitHandler})})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.commentTop,style:{background:repost>0?\"#F5F5F5\":\"#ffffff\"},children:comments.slice(0).reverse().map((item,i)=>{console.log(i);console.log(item._id);//return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\nif(isDetail===false&&i<1){return/*#__PURE__*/_jsx(CommentSA,{post:post,comment:item,isDetail:false},item._id);}else if(isDetail===true){return/*#__PURE__*/_jsx(CommentSA,{post:post,comment:item,isDetail:false},item._id);}})})]})]})})});}export default withStyles(styles)(Post);","map":{"version":3,"names":["useContext","useEffect","useState","useRef","format","AuthContext","Icon","axios","MoreVert","ArrowForwardIcon","Link","withStyles","styles","CardHeader","TextField","Avatar","CommentSA","Button","Stack","Linkify","SendIcon","useMediaQuery","InputEmoji","MoodIcon","React","LinkPreview","InView","COLORS","linkifyit","Write_something","comments","jsx","_jsx","jsxs","_jsxs","Post","_ref","onScrolling","post","classes","isDetail","setComments","inputEl","HTMLInputElement","like","setLike","likes","length","dislike","setDislike","dislikes","isLiked","setIsLiked","isDisliked","setIsDisliked","isLikedByOne","setIsLikedByOne","isDislikedByOne","setIsDislikedByOne","currentPost","setCurrentPost","repost","setRepost","reposts","repostUser","setRepostUser","repostId","setRepostId","rank","setRank","parseFloat","toFixed","isReposted","setIsReposted","webViewVisible","setWebViewVisible","webViewUrl","setWebViewUrl","isNew","setIsNew","user","setUser","text","setText","inputValue","setInputValue","linkify","isVisible","setIsVisible","ref","desc","isMobileDevice","query","isTabletDevice","extractUrls","require","url","urls","setUrls","thumb","thumbnail","setThumbnail","cover","currentUser","dispatch","PF","process","env","REACT_APP_PUBLIC_FOLDER","isHovered","setIsHovered","isDisHovered","setIsDisHovered","createdAt","handleFetchThumbnail","console","log","token","localStorage","getItem","response","headers","data","error","handleMouseEnter","e","handleMouseLeave","handleDisMouseEnter","handleDisMouseLeave","onButtonClick","current","focus","_id","fetchUser","res","get","concat","userId","fetchLastRepostUser","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","handleChange","handleReadChange","put","postId","handleOnEnter","postDetailsHandler","preventDefault","onEnterSubmitHandler","removeHtmlTags","trim","lc","username","txt","prevItems","po","err","submitHandler2","submitHandler","newComment","description","repostHandler","getTextLength","urlRegex","textWithoutUrls","replace","lengthWithoutUrls","likeHandler","p","vl","Number","vl2","dislikeHandler","toggleWebView","toast","info","children","src","title","style","width","height","border","onClick","position","autoClose","hideProgressBar","closeButton","showCommentsHandler","bottomdiv","getElementsByClassName","display","htmlRegex","textWithoutHtml","triangleStyle","margin","background","triangleOverlayStyle","content","top","left","borderLeft","borderBottom","handleViewedChange","view","as","onChange","inView","entry","className","postWrapper","postTop","postTopLeft","textDecoration","color","textColor","profilePicture","alt","postProfileImg","cursor","postUsername","postDate","updatedAt","postCenter","componentDecorator","decoratedHref","decoratedText","key","rel","href","postText","dangerouslySetInnerHTML","__html","marginTop","justifyContent","alignItems","maxWidth","postBottom","postBottomLeft","likeIcon","postLikeCounter","postDislikeCounter","class","sendButton2","type","postBottomRight","to","pathname","state","myObj","postCommentText","commentsWrapper","shareHr","txtnButtonRight","avatar","smallAvatar","shareInput","fontSize","shouldReturn","value","onEnter","placeholder","cardHeader","commentTop","slice","reverse","map","item","i","comment"],"sources":["/home/group4/TWON_STA_Case_Study/client/src/components/post/Post.js"],"sourcesContent":["\nimport { useContext, useEffect, useState, useRef } from \"react\";\nimport { format } from 'timeago.js'\nimport { AuthContext } from \"../../context/AuthContext\";\nimport Icon from '@material-ui/core/Icon'\nimport axios from \"axios\"\nimport { MoreVert } from '@material-ui/icons';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport { Link } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport { styles } from './postStyle'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport TextField from '@material-ui/core/TextField'\nimport Avatar from '@material-ui/core/Avatar'\nimport CommentSA from '../comment/commentSA';\nimport PropTypes from 'prop-types';\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport Linkify from 'react-linkify';\nimport SendIcon from '@mui/icons-material/Send';\nimport { useMediaQuery } from 'react-responsive';\n//import 'emoji-mart/css/emoji-mart.css';\nimport InputEmoji from \"react-input-emoji\";\nimport MoodIcon from '@mui/icons-material/Mood';\nimport React from 'react';\nimport { LinkPreview } from '@dhaiwat10/react-link-preview';\nimport { InView } from 'react-intersection-observer';\nimport { COLORS } from \"../values/colors\";\nimport linkifyit from 'linkify-it';\nimport { Write_something, comments } from '../../constants';\nimport './post.css';\n//import User from \"../../../../server/models/User\";\n\nfunction Post({onScrolling,  post, classes, isDetail }) {\n  const [comments, setComments] = useState([]);\n  const inputEl = React.useRef<HTMLInputElement>(null);\n  //console.log(post);\n  const [like, setLike] = useState(post.likes.length);\n  const [dislike, setDislike] = useState(post.dislikes.length);\n  const [isLiked, setIsLiked] = useState(false);\n  const [isDisliked, setIsDisliked] = useState(false);\n  const [isLikedByOne, setIsLikedByOne] = useState(false);\n  const [isDislikedByOne, setIsDislikedByOne] = useState(false);\n  \n  const [currentPost, setCurrentPost] = useState(post);\n\n  const [repost, setRepost] = useState(post.reposts? post.reposts.length: 0);\n  const [repostUser, setRepostUser] = useState({});\n  const [repostId, setRepostId] = useState(post.reposts[post.reposts? post.reposts.length: 0]);\n  \n  \n  const [rank, setRank] = useState(parseFloat(post.rank.toFixed(2)));//useState(post.reposts? post.reposts.length: 0);\n\n  const [isReposted, setIsReposted] = useState(false);\n  const [webViewVisible, setWebViewVisible] = useState(false);\nconst [webViewUrl, setWebViewUrl] = useState('');\n\n  \n  const [isNew, setIsNew] = useState(false);\n\n  const [user, setUser] = useState({});\n  const [text, setText] = useState('');\n  const [inputValue, setInputValue] = useState(\"\");\n  const linkify = linkifyit();\n  \n  const [isVisible, setIsVisible] = useState(true);\n  const ref = useRef(null);\n  const desc = useRef();\n  const isMobileDevice = useMediaQuery({ query: \"(min-device-width: 480px)\"});\n  const isTabletDevice = useMediaQuery({ query: \"(min-device-width: 768px)\"});\n  const extractUrls = require(\"extract-urls\");\n  let url = \"https://edition.cnn.com/2024/07/10/europe/russian-missile-strike-kyiv-hospital-un-intl-hnk/index.html\"\n  const [urls, setUrls] = useState(post.thumb);\n  const [thumbnail, setThumbnail] = useState('');\n  //const [thumbnail, setThumbnail] = useState('/images/16251726578112.jpeg');\n  var cover = true;\n  // State for controlling popup visibility\n  \n  \n\n  const { user: currentUser, dispatch } = useContext(AuthContext);\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const [isHovered, setIsHovered] = useState(false);\n  const [isDisHovered, setIsDisHovered] = useState(false);\n  \n useEffect(() => {\n  // Check if the post is new\n  setIsNew(post.createdAt ? false : true);\n\n  // Define the function to fetch the thumbnail\n  const handleFetchThumbnail = async () => {\n    if (!post.thumb) {\n      console.log(\"No thumbnail URL provided.\");\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post('/posts/fetch-thumbnail', { \n        urls: post.thumb, \n        headers: { 'auth-token': token }\n      });\n      setThumbnail(response.data.thumbnail);\n    } catch (error) {\n      console.error('Error fetching thumbnail:', error);\n    }\n  };\n\n  // Fetch thumbnail only if there is a thumbnail URL and it hasn't been fetched already\n  if (post.thumb && !thumbnail) {\n    handleFetchThumbnail();\n  }\n}, [post.thumb, thumbnail]);\n  \n      const handleMouseEnter = e => {\n        setIsHovered(true);\n      };\n\n      const handleMouseLeave = e => {\n        setIsHovered(false);\n      };\n\n      const handleDisMouseEnter = e => {\n        setIsDisHovered(true);\n      };\n\n      const handleDisMouseLeave = e => {\n        setIsDisHovered(false);\n      };\n      \n      const onButtonClick = () => {\n        // `current` points to the mounted text input element\n        inputEl.current.focus();\n      };\n  //console.log(\"here is the url\")\n  //console.log(PF)\n    /*const fetchComments = async () => {\n    console.log(\"fetchComments\")\n    const res = await axios.get( + user._id+`?page=${index}`);\n    console.log(res.data)\n    console.log(\"fetch posts\")\n    if(res.data.length > 0){\n      setPosts((prevItems) => [...prevItems, ...res.data\n      //.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n      ]); \n    res.data.length > 0 ? setHasMore(true) : setHasMore(false);\n      //setIndex((index) => index + 1);\n      increment(index, 1);\n    } else {\n      //setPosts([]);\n      //setIndex((index) => 0);\n      //increment(index, -index);\n    }\n\n      //setPreFilter(whPosts);\n      console.log(whPosts);\n      //setPosts(res.data.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})); \n  };*/\n\n\n  useEffect(() => {\n    //setIsLiked(post.likes.includes(currentUser._id));\n    //setIsLikedByOne(post.likes.length == 1)\n    //setIsDisliked(post.dislikes.includes(currentUser._id));\n    //setIsDislikedByOne(post.dislikes.length == 1)\n    setComments(post.comments);\n\n  }, [currentUser._id, post.likes, post.dislikes]);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const fetchUser = async () => {\n      const res = await axios.get(`/users?userId=${post.userId}`, {headers: { 'auth-token': token }})\n      setUser(res.data);\n    };\n    \n    const fetchLastRepostUser = async () => {\n      console.log(\"repostId\")\n    console.log(post.reposts[post.reposts.length-1])\n      const res = await axios.get(`/users?userId=${post.reposts[post.reposts.length-1]}`, {headers: { 'auth-token': token }})\n      setRepostUser(res.data);\n    };\n  \n    \n    //console.log(post.comments.length)\n    fetchUser();\n    if(post.reposts.length > 0){\n      fetchLastRepostUser();\n    }\n  }, []);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (ref.current && !ref.current.contains(event.target)) {\n        setIsVisible(true);\n      }\n    };\n    document.addEventListener(\"click\", handleClickOutside, false);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside, false);\n    };\n  }, []);\n\n  function handleChange(text) {\n    setInputValue(text)\n    console.log(\"enter\", text);\n\n  }\n\n  const handleReadChange = () => {\n    const token = localStorage.getItem('token');\n      axios.put(\"/users/\" + currentUser._id + \"/read\", \n      { postId: post._id, \n        headers: { 'auth-token': token }\n      });\n  };\n\n  function handleOnEnter(text) {\n    console.log(\"enter\", text);\n  }\n\n  // postDetails\n  const postDetailsHandler = async (e) => {\n    e.preventDefault();\n  };\n\n\n  // submit a comment\n  const onEnterSubmitHandler = async () => {\n\n    const token = localStorage.getItem('token');\n    //setInputValue(prevValue => prevValue + \"\\n\");\n    console.log(removeHtmlTags(inputValue).trim().length);\n    console.log(\"currentUser\")\n    console.log(currentUser)\n    if(removeHtmlTags(inputValue).trim().length != 0){\n    try {\n      setInputValue('');\n      const lc = await axios.post(\"/posts/\" + post._id + \"/comment\", { userId: currentUser._id, username: currentUser.username, txt: inputValue, postId: post._id, headers: { 'auth-token': token } });\n      console.log(\"Posted a comment\");\n      console.log(lc.data)\n      //setComments([...comments, lc.data]);\n      //post.comments([...comments, lc.data]);\n      setComments((prevItems) => [...prevItems, lc.data]);\n      setInputValue('');\n      const po = await axios.get(\"/posts/\" + post._id, { headers: { 'auth-token': token } });\n      console.log(\"post\");\n      console.log(po.data);\n      console.log(post);\n      setCurrentPost(po.data);\n      // refresh the page after posting something\n      //window.location.reload();\n    } catch (err) { \n      console.log(\"Posted a comment\");\n      console.log(err); }\n  }\n};\n\nconst submitHandler2 = async (e) => {\n  e.preventDefault();\n  \n};\n\n\n  // submit a comment\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    console.log(removeHtmlTags(inputValue).trim().length);\n    console.log(\"currentUser\")\n    console.log(currentUser)\n    if(removeHtmlTags(inputValue).trim().length != 0){\n    const newComment = { userId: user._id, description: inputValue,};\n    console.log(newComment);\n    try {\n      setInputValue('');\n      const lc = await axios.post(\"/posts/\" + post._id + \"/comment\", { userId: currentUser._id, username: currentUser.username, txt: inputValue, postId: post._id, headers: { 'auth-token': token } });\n      console.log(\"Posted a comment\");\n      console.log(lc.data)\n      //setComments([...comments, lc.data]);\n      //post.comments([...comments, lc.data]);\n      setComments((prevItems) => [...prevItems, lc.data]);\n      setInputValue('');\n      const po = await axios.get(\"/posts/\" + post._id, { headers: { 'auth-token': token } });\n      console.log(\"post\");\n      console.log(po.data);\n      console.log(post);\n      setCurrentPost(po.data);\n      // refresh the page after posting something\n      //window.location.reload();\n    } catch (err) { \n      console.log(\"Posted a comment\");\n      setInputValue('');\n      console.log(err); }\n    }\n  };\n\n  /*const likeHandler = () => {\n    try {\n      axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n    } catch (err) { }\n    setLike(isLiked ? like - 1 : like + 1);\n    setIsLiked(!isLiked);\n    if (post.likes.length == 1){\n      setIsLikedByOne(false);\n    }\n  };*/\n\n\n  const repostHandler = async () => {\n    const token = localStorage.getItem('token');\n    try {\n      axios.post(\"/posts/\" + post._id + \"/repost\", { userId: currentUser._id , headers: { 'auth-token': token }});\n    } catch (err) {\n      console.log(err)\n     }\n    setRepost(isReposted ? repost + 1 : repost + 1);\n    setIsReposted(true);\n\n  };\n\n  function getTextLength(text) {\n    // Regular expression to match URLs starting with \"http://\" or \"https://\"\n    const urlRegex = /(https?:\\/\\/\\S+)/g;\n    \n    // Remove URLs from the text\n    const textWithoutUrls = text.replace(urlRegex, '');\n    \n    // Calculate the length of the text without URLs\n    const lengthWithoutUrls = textWithoutUrls.length;\n    \n    return lengthWithoutUrls;\n}\n\n  const likeHandler = async () => {\n    //if(!isDisliked){\n      const token = localStorage.getItem('token');\n      try {\n        const p = await axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id, headers: { 'auth-token': token } });\n        console.log(\"likeHandler\");\n        console.log(p);\n\n        //console.log(p.data.likes.length);\n        //if(p.data.likes.length > 0){\n        const vl = Number(like) + p.data.likes\n        if(vl < 0){setLike(0);}else{setLike(vl);}\n\n        const vl2 = Number(dislike) + p.data.dislikes\n        if(vl2 < 0){setDislike(0);}else{setDislike(vl2);}\n\n        //}else{\n        //  setLike(0);\n        //}\n        //if(p.data.dislikes.length > 0){\n        \n        //}else{\n           // setDislike(0);\n        //}\n        \n      } catch (err) { console.log(err); }\n    \n    //if (p.likes.length == 1){\n    //  setIsLikedByOne(false);\n    //}\n   /* }else{\n      try {\n        const totLikes = axios.put(\"/posts/\" + post._id + \"/dislike\", { userId: currentUser._id });\n\n        console.log(totLikes.length);\n        setDislike(totLikes.length);\n        if(totLikes.length > 0){\n          setIsDisliked(totLikes.includes(currentUser._id));}else{setIsDisliked(false);}\n      } catch (err) {console.log(err);}\n  }*/\n  };\n\n  const dislikeHandler = async () => {\n    //if(!isLiked){\n      const token = localStorage.getItem('token');\n    try {\n      const p = await axios.put(\"/posts/\" + post._id + \"/dislike\", { userId: currentUser._id, headers: { 'auth-token': token } });\n      console.log(\"dislike Handler\");\n        console.log(p);\n      //if(p.data.likes.length > 0){\n        const vl = Number(like) + p.data.likes\n        if(vl < 0){setLike(0);}else{setLike(vl);}\n\n        const vl2 = Number(dislike) + p.data.dislikes\n        if(vl2 < 0){setDislike(0);}else{setDislike(vl2);}\n\n      //}else{\n      //  setLike(0);\n\n      //}\n\n      //if(p.data.dislikes.length > 0){\n          //setDislike(p.data.dislikes.length);\n      //}else{\n      //    setDislike(0);\n      //}\n\n    } catch (err) {console.log(err);}\n    \n    //if (p.dislikes.length == 1){\n    //  setIsDislikedByOne(false);\n    //}\n /* }else{\n    setIsLiked(false);\n\n    try {\n      const totLikes = axios.put(\"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\n\n      console.log(totLikes.length);\n      setLike(totLikes.length);\n      if(totLikes.length > 0){\n        setIsLiked(totLikes.includes(currentUser._id));}else{setIsLiked(false);}\n\n    } catch (err) { console.log(err);\n    }\n  }*/\n  };\n\n\n    const toggleWebView = () => {\n      toast.info(\n        <div>\n          <iframe\n            src=\"https://thebigsm.github.io/Fake_News_WebP/\"\n            title=\"WebView\"\n            style={{ width: '100%', height: '400px', border: 'none' }}\n          />\n          <button onClick={() => setWebViewVisible(false)}>Close</button>\n        </div>, \n        {\n          position: \"top-center\",\n          autoClose: 5000, // Auto-close after 5 seconds, adjust as needed\n          hideProgressBar: true,\n          closeButton: false, // No close button for toast notification\n        }\n      );\n    };\n\n\n  const showCommentsHandler = () => {\n    var bottomdiv = document.getElementsByClassName(\"form\")\n    bottomdiv.style.display=\"none\";\n  }\n\n  function removeHtmlTags(text) {\n    // Regular expression to match HTML tags\n    const htmlRegex = /<[^>]*>/g;\n    \n    // Remove HTML tags from the text\n    const textWithoutHtml = text.replace(htmlRegex, '');\n    \n    return textWithoutHtml;\n}\n\nconst triangleStyle = {\n  position: \"relative\",\n  margin: isDetail && \"5px 0\",\n  background:  \"#F5F5F5\" \n};\n\nconst triangleOverlayStyle = {\n  content: '\"\"',\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  width: 0,\n  height: 0,\n  borderLeft: isNew && \"50px solid blue\", // Adjust size as needed\n  borderBottom: \"50px solid transparent\" // Adjust size as needed\n};\n\n\n  function handleViewedChange(view, post) {\n    /*if(view == true){\n    console.log(\"view \", view);\n    onScrolling(post._id);\n    }*/\n  }\n  //<img src={PF + post.img} alt=\"\" className={classes.postImg} />\n  //to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}` }\n  // to={isDetail? `/profile/${repostUser.username}`: `/profile/${repostUser.username}`}\n  //to={isDetail? `/profile/${user.username}`: `/profile/${user.username}` }\n  //to={isDetail? `/profile/${user.username}`: `/profile/${user.username}`}\n  //\n\n  return (\n    <InView as=\"div\" onChange={(inView, entry) => handleViewedChange(inView, post)}>\n    <div className={classes.post} style={{ position: \"relative\", margin: isDetail && \"5px 0\",  background: repost>0 ? \"#F5F5F5\" : \"#ffffff\"}}  >\n      <div className={classes.postWrapper} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n      <button onClick={toggleWebView}>Open WebView</button>\n\n      <div style={triangleOverlayStyle}></div>\n        <div className={classes.postTop} style={{ background: repost>0 ? \"#ffffff\" : \"#ffffff\" }}>\n        {(repost > 0)? \n          <div className={classes.postTopLeft}>\n            <Link  style={{textDecoration: 'none', color: COLORS.textColor}} >\n              <img src={repostUser.profilePicture ? PF + repostUser.profilePicture : PF + 'person/noAvatar.png'} alt=\"\" className={classes.postProfileImg} />\n            </Link>\n            <Link style={{textDecoration: 'none', color: COLORS.textColor, cursor:'default'}}>\n            <span className={classes.postUsername}>{repostUser.username}</span>\n            </Link>\n            <span className={classes.postDate}>{format(post.updatedAt)}</span>\n            <span className={classes.postDate} style={{margin: '0px 0px 0px 20px',}}>{\" Reposted by: \"+ repost}</span>\n          \n          </div>: <div></div>}\n          { /*(repost > 0)? \n          <div className={classes.postTopRight}>\n          <Link style={{textDecoration: 'none', color: COLORS.textColor}} onClick={repostHandler}>\n            \n          { (isMobileDevice && isTabletDevice) ? <Stack direction=\"row\" spacing={2}>\n            <Button variant=\"contained\" endIcon={<SendIcon />}> Repost </Button></Stack> :<ArrowForwardIcon /> }  </Link></div>: <div></div>*/}\n\n        </div>\n        \n        <div className={classes.postTop} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n        \n          <div className={classes.postTopLeft} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            <Link  style={{textDecoration: 'none', color: COLORS.textColor, background: repost>0 ? \"#F5F5F5\" : \"#ffffff\"}} >\n              <img src={user.profilePicture ? PF + user.profilePicture : PF + 'person/noAvatar.png'} alt=\"\" className={classes.postProfileImg} />\n            </Link>\n            <Link style={{textDecoration: 'none', color: COLORS.textColor, cursor:'default', background: repost>0 ? \"#F5F5F5\" : \"#ffffff\"}} >\n            <span className={classes.postUsername}>\n              {user.username}\n            </span>\n            </Link>\n            <span className={classes.postDate} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>{format(post.createdAt)}</span>\n            {/*<span className={classes.postDate} style={{margin: '0px 0px 0px 20px',}}>{\" Reposted by: \"+ repost}</span>*/}\n          </div>\n          \n          { /*(repost < 1)?\n          <div className={classes.postTopRight} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n          <Link style={{textDecoration: 'none', color: COLORS.textColor}} onClick={repostHandler}>\n            \n          { (isMobileDevice && isTabletDevice) ? <Stack direction=\"row\" spacing={2}>\n            <Button variant=\"contained\" endIcon={<SendIcon />}> Repost </Button></Stack> :<ArrowForwardIcon /> }  </Link></div>: <div></div>\n  */}\n\n        </div>\n        \n        <div className={classes.postCenter} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n        <Linkify componentDecorator={(decoratedHref, decoratedText, key) => (<a target=\"blank\" rel=\"noopener noreferrer\" href={decoratedHref} key={key} > {decoratedText} </a>)}>\n          <div className={classes.postText}  style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            {!isDetail && post?.desc.length > 0? \n              <div className={classes.postText}  style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }} dangerouslySetInnerHTML={{ __html: post?.desc }}> \n                  {/*<Link to={{pathname:`/postdetail/${user.username}`, state:{myObj: currentPost}}}></Link>*/}\n                </div>\n            :\n            <div className={classes.postText}  style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }} dangerouslySetInnerHTML={{ __html: post?.desc }}>\n             </div>}\n            \n            \n            {thumbnail && (\n              <div  style={{ marginTop:\"20px\", background: repost>0 ? \"#F5F5F5\" : \"#ffffff\", display: 'flex', justifyContent: 'center',alignItems: 'center',}}>\n                  <img src={thumbnail} alt=\"Thumbnail\" style={{ width: '100%', maxWidth: '600px', height: 'auto',cursor: 'default' }} />\n              </div>\n          )}\n           </div>\n        </Linkify>\n          \n          \n        </div>\n        <div className={classes.postBottom} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n          <div className={classes.postBottomLeft} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            <img src={`${PF}clike.png`} alt=\"\" className={classes.likeIcon} onClick={likeHandler} />\n            <span className={classes.postLikeCounter}>{like}</span>\n                  \n            <img src={`${PF}cdislike.png`} alt=\"\" className={classes.likeIcon} onClick={dislikeHandler} />\n            <span className={classes.postDislikeCounter}>{dislike}</span>\n            <form class = \"form\">\n            <SendIcon className={classes.sendButton2} style={{ display:\"flex\", margin:\"0px 20px\"}} type=\"submit\" onClick={submitHandler2}/>\n            </form>\n          </div>\n          <div className={classes.postBottomRight} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n          <Link style={{textDecoration: 'none', color: COLORS.textColor}} to={{pathname:`/postdetail/${user.username}`, state:{myObj: currentPost}}}> <div className={classes.postCommentText} >{comments.length} {\"Kommentare\"}</div></Link>\n          </div>\n        </div>\n        {isDetail && (\n        <div ref={ref} className={classes.commentsWrapper}  style={{ display: isVisible ? \"block\" : \"none\", background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n        <hr className={classes.shareHr} />\n        \n          <div className={classes.txtnButtonRight} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            <CardHeader\n              avatar={<Avatar className={classes.smallAvatar} src={currentUser.profilePicture? PF + currentUser.profilePicture: PF + \"person/noAvatar.png\"} style={{ background: repost>0 ? \"#ffffff\" : \"#ffffff\" }} />}\n              title={<InputEmoji className={classes.shareInput} style={{ fontSize: \"15\", height: \"40px\", background: repost>0 ? \"#ffffff\" : \"#ffffff\" }} shouldReturn={true} value={inputValue}  onChange={handleChange}  onEnter={onEnterSubmitHandler} placeholder={Write_something} />}\n              className={classes.cardHeader} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}/>\n\n            <form class = \"form\">\n              <SendIcon className={classes.sendButton2} style={{ display:\"flex\", margin:\"0px 20px\"}} type=\"submit\" onClick={submitHandler}/>\n            </form>\n            </div>\n            <div className={classes.commentTop} style={{ background: repost>0 ? \"#F5F5F5\" : \"#ffffff\" }}>\n            {comments.slice(0).reverse().map((item, i) => {\n              console.log(i);\n              console.log(item._id);\n                      //return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\n              if(isDetail===false && i < 1) {\n                  return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\n\n              } else if(isDetail === true) {\n                  return <CommentSA key={item._id} post={post} comment={item} isDetail={false}/>\n                  \n              }\n              })\n            }\n        </div>\n        </div>)}\n      </div>\n    </div>\n    </InView>\n  )\n}\n\nPost.propTypes = {\n  post: PropTypes.object.isRequired,\n  onRemove: PropTypes.func.isRequired\n}\nexport default withStyles(styles)(Post);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}