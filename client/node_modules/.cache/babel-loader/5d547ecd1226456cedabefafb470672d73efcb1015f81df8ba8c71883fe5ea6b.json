{"ast":null,"code":"import React from'react';import{Users}from\"../../dummyData\";import Online from\"../online/Online\";import{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import{Add,Remove}from\"@material-ui/icons\";import{withStyles}from'@material-ui/core/styles';import{styles}from'./rightbarStyle';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Rightbar(_ref){let{user,classes}=_ref;const PF=process.env.REACT_APP_PUBLIC_FOLDER;const[friends,setFriends]=useState([]);const{user:currentUser,dispatch}=useContext(AuthContext);const[followed,setFollowed]=useState([]//currentUser.followings.includes(user?.id)\n);useEffect(()=>{setFollowed(currentUser.followings.includes(user._id));},[currentUser.followings,user]);useEffect(()=>{const token=localStorage.getItem('token');const getFriends=async()=>{try{const friendList=await axios.get(\"/users/allUsers/\"+user._id,{headers:{'auth-token':token}});setFriends(friendList.data);}catch(err){console.log(err);}};getFriends();},[user]);/*const handleClick = async () => {\n    try {\n      if (followed) {\n        await axios.put(`/users/${user._id}/unfollow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"UNFOLLOW\", payload: user._id });\n      } else {\n        await axios.put(`/users/${user._id}/follow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"FOLLOW\", payload: user._id });\n      }\n      setFollowed(!followed);\n    } catch (err) {\n    }\n  };*/const HomeRightbar=()=>{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{className:classes.rightbarTitle,children:\"Followers\"}),/*#__PURE__*/_jsx(\"ul\",{className:classes.rightbarFriendList,children:friends.map(u=>/*#__PURE__*/_jsx(Online,{user:u},u.id))})]});};const ProfileRightbar=()=>{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{className:classes.rightbarTitle,children:\"User information\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfo,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfoItem,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.rightbarInfoKey,children:\"City:\"}),/*#__PURE__*/_jsx(\"span\",{className:classes.rightbarInfoValue,children:user.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfoItem,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.rightbarInfoKey,children:\"From:\"}),/*#__PURE__*/_jsx(\"span\",{className:classes.rightbarInfoValue,children:user.from})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarInfoItem,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.rightbarInfoKey,children:\"Relationship:\"}),/*#__PURE__*/_jsx(\"span\",{className:classes.rightbarInfoValue,children:user.relationship})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:classes.rightbarTitle,children:\"FOLLOWINGS\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.rightbarFollowings,children:friends.map(friend=>/*#__PURE__*/_jsx(Link,{reloadDocument:true,to:\"/profile/\"+friend.username,className:classes.linkToFriendProfile,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.rightbarFollowing,children:[/*#__PURE__*/_jsx(\"img\",{src:friend.profilePicture?PF+friend.profilePicture:PF+'person/noAvatar.png',alt:\"\",className:classes.rightbarFollowingImg}),/*#__PURE__*/_jsx(\"span\",{className:classes.rightbarFollowingName,children:friend.username})]})},friend._id))})]});};return/*#__PURE__*/_jsx(\"div\",{className:classes.rightbar,children:/*#__PURE__*/_jsx(\"div\",{className:classes.rightbarWrapper,children:user?/*#__PURE__*/_jsx(ProfileRightbar,{}):/*#__PURE__*/_jsx(HomeRightbar,{})})});}export default withStyles(styles)(Rightbar);","map":{"version":3,"names":["React","Users","Online","useContext","useEffect","useState","axios","Link","AuthContext","Add","Remove","withStyles","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Rightbar","_ref","user","classes","PF","process","env","REACT_APP_PUBLIC_FOLDER","friends","setFriends","currentUser","dispatch","followed","setFollowed","followings","includes","_id","token","localStorage","getItem","getFriends","friendList","get","headers","data","err","console","log","HomeRightbar","children","className","rightbarTitle","rightbarFriendList","map","u","id","ProfileRightbar","rightbarInfo","rightbarInfoItem","rightbarInfoKey","rightbarInfoValue","city","from","relationship","rightbarFollowings","friend","reloadDocument","to","username","linkToFriendProfile","rightbarFollowing","src","profilePicture","alt","rightbarFollowingImg","rightbarFollowingName","rightbar","rightbarWrapper"],"sources":["/home/group4/TWON_STA_Case_Study/client/src/components/rightbar/Rightbar.js"],"sourcesContent":["import React from 'react';\nimport { Users } from \"../../dummyData\";\nimport Online from \"../online/Online\";\nimport { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { Add, Remove } from \"@material-ui/icons\";\nimport { withStyles } from '@material-ui/core/styles';\nimport {styles} from './rightbarStyle'\n\nfunction Rightbar({ user, classes }) {\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const [friends, setFriends] = useState([]);\n  const { user: currentUser, dispatch } = useContext(AuthContext);\n  const [followed, setFollowed] = useState([]\n    //currentUser.followings.includes(user?.id)\n  );\n\n  useEffect(() => {\n        setFollowed(currentUser.followings.includes(user._id));\n      }, [currentUser.followings, user]);\n\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const getFriends = async () => {\n      try {\n        const friendList = await axios.get(\"/users/allUsers/\" + user._id, {headers: { 'auth-token': token }});\n        setFriends(friendList.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getFriends();\n  }, [user]);\n\n  /*const handleClick = async () => {\n    try {\n      if (followed) {\n        await axios.put(`/users/${user._id}/unfollow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"UNFOLLOW\", payload: user._id });\n      } else {\n        await axios.put(`/users/${user._id}/follow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"FOLLOW\", payload: user._id });\n      }\n      setFollowed(!followed);\n    } catch (err) {\n    }\n  };*/\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        <h4 className={classes.rightbarTitle}>Followers</h4>\n        <ul className={classes.rightbarFriendList}>\n          {friends.map((u) => (\n            <Online key={u.id} user={u} />\n          ))}\n        </ul>\n      </>\n    );\n  };\n\n  const ProfileRightbar = () => {\n    return (\n      <>\n        {/*user.username !== currentUser.username && (\n          <button className={classes.rightbarFollowButton} onClick={handleClick}>\n            {followed ? \"Unfollow\" : \"Follow\"}\n            {followed ? <Remove /> : <Add />}\n          </button>\n        )*/}\n        <h4 className={classes.rightbarTitle}>User information</h4>\n        <div className={classes.rightbarInfo}>\n          <div className={classes.rightbarInfoItem}>\n            <span className={classes.rightbarInfoKey}>City:</span>\n            <span className={classes.rightbarInfoValue}>{user.city}</span>\n          </div>\n          <div className={classes.rightbarInfoItem}>\n            <span className={classes.rightbarInfoKey}>From:</span>\n            <span className={classes.rightbarInfoValue}>{user.from}</span>\n          </div>\n          <div className={classes.rightbarInfoItem}>\n            <span className={classes.rightbarInfoKey}>Relationship:</span>\n            <span className={classes.rightbarInfoValue}>\n            {user.relationship}\n            </span>\n          </div>\n        </div>\n        <h4 className={classes.rightbarTitle}>FOLLOWINGS</h4>\n        <div className={classes.rightbarFollowings}>\n          {friends.map((friend) => (\n            <Link\n            reloadDocument={true}\n              key={friend._id}\n              to={\"/profile/\" + friend.username}\n              className={classes.linkToFriendProfile}\n              \n            >\n              <div className={classes.rightbarFollowing}>\n                <img\n                  src={friend.profilePicture? PF + friend.profilePicture: PF+'person/noAvatar.png'\n                  }\n                  alt=\"\"\n                  className={classes.rightbarFollowingImg}\n                />\n                <span className={classes.rightbarFollowingName}>{friend.username}</span>\n              </div>\n            </Link>\n          ))}\n        </div>\n      </>\n    );\n  };\n  return (\n    <div className={classes.rightbar}>\n      <div className={classes.rightbarWrapper}>\n        {user ? <ProfileRightbar /> : <HomeRightbar />}\n      </div>\n    </div>\n  );\n}\n\nexport default withStyles(styles)(Rightbar);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}