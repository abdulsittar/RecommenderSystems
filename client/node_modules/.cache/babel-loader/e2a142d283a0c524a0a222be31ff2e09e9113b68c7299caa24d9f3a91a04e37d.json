{"ast":null,"code":"import React from'react';import{useState,useEffect}from'react';import Post from'../post/Post';import Share from'../share/Share';import axios from\"axios\";import{useContext}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import{withStyles}from'@material-ui/core/styles';import{styles}from'./feedStyle';import InfiniteScroll from\"react-infinite-scroll-component\";import Loader from\"../loader/loader\";import LoadingBar from\"react-top-loading-bar\";import{useMediaQuery}from'react-responsive';import{useRef}from'react';import{regSw,subscribe}from'../../helper.js';import{io}from'socket.io-client';import Button from'@mui/material/Button';import Dialog from'@mui/material/Dialog';import DialogActions from'@mui/material/DialogActions';import DialogContent from'@mui/material/DialogContent';import DialogContentText from'@mui/material/DialogContentText';import DialogTitle from'@mui/material/DialogTitle';import Slide from'@mui/material/Slide';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Transition=/*#__PURE__*/React.forwardRef(function Transition(props,ref){return/*#__PURE__*/_jsx(Slide,{direction:\"up\",ref:ref,...props});});function Feed(_ref){let{username,classes,selectedValue,searchTerm,actionTriggered}=_ref;const[posts,setPosts]=useState([]);const[hasMore,setHasMore]=useState(true);const[index,setIndex]=useState(0);const[isFiltered,setIsFiltered]=useState(false);const[preFilter,setPreFilter]=useState(-1);const[progress,setProgress]=useState(0);const[preProfile,setPreProfile]=useState(\" \");const[viewedPosts,setViewedPosts]=useState([]);const{user:currentUser}=useContext(AuthContext);const isMobileDevice=useMediaQuery({query:\"(min-device-width: 480px)\"});const isTabletDevice=useMediaQuery({query:\"(min-device-width: 768px)\"});const[socket,setSocket]=useState(null);const[open,setOpen]=React.useState(false);let postCallCount=0;let maxCalls=5;const handleFeedAction=async e=>{console.log(\"Feed received action from Topbar!\");const lc=await axios.post(\"/posts/\"+currentUser._id+\"/createRefreshData\",{version:user.pool,userId:user._id,headers:{'auth-token':token}});fetchPosts(0);};const handleClickOpen=()=>{setOpen(true);};const handleClose=()=>{setOpen(false);continueProcess(0);setPosts(prevPosts=>prevPosts.slice(1));};const handleYes=async e=>{setOpen(false);const firstPost=posts[0];setTimeout(()=>{setPosts(prevPosts=>prevPosts.slice(1));},1000);const token=localStorage.getItem('token');const newPost={userId:user._id,desc:firstPost.desc,thumb:firstPost.thumb,pool:user.pool,headers:{'auth-token':token}};try{const pst=await axios.post(\"/posts/\"+user._id+\"/create\",newPost);socket.emit('sendMessage',pst);await axios.post(\"/posts/UserReadSpecialPost\",{\"postId\":firstPost._id,\"userId\":user._id,headers:{'auth-token':token}});continueProcess(10000);postCallCount++;}catch(err){console.log(err);}};const continueProcess=dlay=>{if(postCallCount<maxCalls){// Call showPostsInOrder again after 60 seconds\nsetTimeout(()=>{showPostsInOrder();// Continue the process by checking the condition in handleYes\nif(postCallCount<maxCalls){setTimeout(()=>{//handleYes();\n},5000);// Wait 20 seconds after showPostsInOrder for handleYes\n}},dlay);// 60000 milliseconds = 60 seconds\n}else{console.log(\"Process stopped after 5 calls.\");}};const[windowSize,setWindowSize]=useState(getWindowSize());//useEffect(() => {\n//console.log(\"setSocket\");\n//setSocket(io('wss://cleopatra.ijs.si/chat', {\n//   transports: [ 'polling'],\n//    withCredentials: true\n//  }));\n//}, [])\nuseEffect(()=>{console.log('Posts updated: ',posts);if(actionTriggered){handleFeedAction();}},[posts,actionTriggered]);useEffect(()=>{socket===null||socket===void 0?void 0:socket.emit('addUser',user===null||user===void 0?void 0:user.id);console.log(\"active users \");socket===null||socket===void 0?void 0:socket.on('getUsers',users=>{console.log(\"active users \",users);});socket===null||socket===void 0?void 0:socket.on('getMessage',res=>{console.log('active data: >>',res.data);if(res.data.pool==user.pool){const arr=[res.data];setPosts(prevItems=>[...arr,...prevItems]);console.log('posts data: >>',posts);}//fetchPosts(selectedValue); \n});},[socket]);const showPostsInOrder=async()=>{const token=localStorage.getItem('token');console.log(\"showPostsInOrder\");const res=await axios.get(\"/posts/\"+currentUser._id+\"/getSpecialPosts\",{headers:{'auth-token':token}});console.log(res.data);if(res.data['no']){const arr=[{\"_id\":res.data[\"_id\"],\"desc\":res.data[\"desc\"],\"pool\":res.data[\"pool\"],\"userId\":\"66f590ae38f16e2cea8d0646\",\"thumb\":\"https://fastly.picsum.photos/id/451/200/300.jpg?blur=5&hmac=Cs_EydLmPTWdSMrzBl8vXIG9b3CaH9iP_yVdDFiXUhU\",\"likes\":[],\"dislikes\":[],\"comments\":[],\"reposts\":[],\"rank\":1000}];setPosts(prevItems=>[...arr,...prevItems]);console.log('posts data: >>',posts);//postCallCount++;\nsetTimeout(handleClickOpen,5000);}};const increment=async(pv,iv)=>{console.log(\"increatem\");console.log(pv);console.log(iv);setIndex(pv+iv);console.log(index);};/*async function registerAndSubscribe () {\n    try {\n        const serviceWorkerReg = await regSw ();\n        await subscribe (serviceWorkerReg);\n    } catch (error) {\n        console.log (error);\n    }\n}*/const{user}=useContext(AuthContext);const[followed,setFollowed]=useState([]//currentUser.followings.includes(user?.id)\n);if(preFilter==-1){console.log(preFilter);setPreFilter(selectedValue);}else if(preFilter!==selectedValue){setIndex(0);setPosts([]);setPreFilter(selectedValue);}const chek=username?true:false;if(chek==true){console.log(preProfile);console.log(\"User name1\");console.log(username);const ii=preProfile===username?true:false;console.log(ii);if(preProfile===\" \"){setPreProfile(username);console.log(\"User name2\");console.log(username);console.log(preProfile);console.log(user.username);}else if(preProfile!==username){console.log(\"a NEW User name\");console.log(username);setIndex(0);setPosts([]);setPreProfile(username);}}const filterLoadedPosts=async()=>{console.log(\"filterLoadedPosts\");if(searchTerm===''){setPosts(posts);}else{const filteredData=posts.filter(post=>{return post.desc.toLowerCase().includes(searchTerm.toLowerCase());});setPosts(filteredData);}};const fetchPosts=async selectedValue=>{setProgress(30);console.log(\"fetchpost\");const chek=username?true:false;if(chek==true){console.log(preProfile);console.log(\"User name1\");console.log(username);const ii=preProfile===username?true:false;console.log(ii);if(preProfile===\" \"){setPreProfile(username);console.log(\"User name2\");console.log(username);console.log(preProfile);console.log(user.username);}else if(preProfile!==username){console.log(\"a NEW User name\");console.log(username);setIndex(0);setPosts([]);setPreProfile(username);}}var whPosts=\"/posts/timelinePag/\";if(selectedValue==0){var whPosts=\"/posts/timelinePag/\";}else if(selectedValue==1){whPosts=\"/posts/onlyFollowersPag/\";}else if(selectedValue==2){whPosts=\"/posts/onlyFollowingsPag/\";}console.log(preFilter);console.log(whPosts);const token=localStorage.getItem('token');const res=username?await axios.get(\"/posts/profile/\"+username+\"?page=\".concat(index),{headers:{'auth-token':token,'userId':user._id}}):await axios.get(whPosts+user._id+\"?page=\".concat(index),{headers:{'auth-token':token,'userId':user._id}});console.log(res.data);console.log(\"fetch posts\");if(res.data.length){if(res.data.length>0){setPosts(prevItems=>[...prevItems,...res.data//.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n]);res.data.length%20>0?setHasMore(false):setHasMore(true);//setIndex((index) => index + 1);\nincrement(index,1);setProgress(100);}else{setHasMore(false);setProgress(100);//setPosts([]);\n//setIndex((index) => 0);\n//increment(index, -index);\n}//setPreFilter(whPosts);\nconsole.log(whPosts);//setPosts(res.data.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})); \n}};function updateViewdPosts(post){/*const oldViewed = [...viewedPosts, post];\n    setViewedPosts(oldViewed);\n    console.log(\"array  \", viewedPosts);\n    console.log(\"post id  \", post);\n    console.log(\"viewed length \", viewedPosts.length);\n    if(viewedPosts.length == 10){\n        axios.put(\"/users/\" + currentUser._id + \"/viewed\", { postId: post });\n        setViewedPosts([]);\n    }*/}const fetchMoreData=async()=>{setProgress(30);if(searchTerm?searchTerm.length!==0:false){console.log(\"searchTerm\");console.log(searchTerm.length);setProgress(100);return;}if(index==0){setProgress(100);return;}//console.log(\"fetchpost\")\nconsole.log(\"fetch more  posts\");console.log(selectedValue);var whPosts=\"/posts/timelinePag/\";if(selectedValue==0){whPosts=\"/posts/timelinePag/\";}else if(selectedValue==1){whPosts=\"/posts/onlyFollowersPag/\";}else if(selectedValue==2){whPosts=\"/posts/onlyFollowingsPag/\";}const token=localStorage.getItem('token');const res=username?await axios.get(\"/posts/profile/\"+username+\"?page=\".concat(index),{headers:{'auth-token':token}}):await axios.get(whPosts+user._id+\"?page=\".concat(index),{headers:{'auth-token':token}});//console.log(res.data);\nif(res.data.length>0){setPosts(prevItems=>[...prevItems,...res.data//.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n]);res.data.length%20>0?setHasMore(false):setHasMore(true);increment(index,1);setProgress(100);}else{setHasMore(false);setProgress(100);//setPosts([]);\n//setIndex((index) => 0);\n//increment(index, -index);\n}};function getWindowSize(){const{innerWidth,innerHeight}=window;return{innerWidth,innerHeight};};useEffect(()=>{//registerAndSubscribe();\nconsole.log(\"use effects!\");//showPostsInOrder();\nif(selectedValue!=10){///// Remove this breakpoint during the casestudy\n//filterLoadedPosts()\nif(searchTerm?searchTerm.length!==0:false){console.log(\"searchTerm\");console.log(searchTerm.length);filterLoadedPosts();}else{//filterLoadedPosts()\nfetchPosts(selectedValue);}}function handleWindowResize(){setWindowSize(getWindowSize());}window.addEventListener('resize',handleWindowResize);return()=>{window.removeEventListener('resize',handleWindowResize);};},[username,user._id,selectedValue,searchTerm]);const refreshed=async selectedValue=>{console.log(\"refreshed\");setPosts([]);const chek=username?true:false;if(chek==true){console.log(preProfile);console.log(\"User name1\");console.log(username);const ii=preProfile===username?true:false;console.log(ii);if(preProfile===\" \"){setPreProfile(username);console.log(\"User name2\");console.log(username);console.log(preProfile);console.log(user.username);}else if(preProfile!==username){console.log(\"a NEW User name\");console.log(username);setIndex(0);setPosts([]);setPreProfile(username);}}var whPosts=\"/posts/timelinePag/\";if(selectedValue==0){var whPosts=\"/posts/timelinePag/\";}else if(selectedValue==1){whPosts=\"/posts/onlyFollowersPag/\";}else if(selectedValue==2){whPosts=\"/posts/onlyFollowingsPag/\";}console.log(preFilter);console.log(whPosts);const token=localStorage.getItem('token');const res=username?await axios.get(\"/posts/profile/\"+username+\"?page=\".concat(0),{headers:{'auth-token':token}}):await axios.get(whPosts+user._id+\"?page=\".concat(0),{headers:{'auth-token':token}});console.log(res.data);console.log(\"fetch posts\");if(res.data.length){if(res.data.length>0){setPosts(prevItems=>[...prevItems,...res.data//.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n]);res.data.length%20>0?setHasMore(false):setHasMore(true);//setIndex((index) => index + 1);\nincrement(0,1);}else{setHasMore(false);//setPosts([]);\n//setIndex((index) => 0);\n//increment(index, -index);\n}//setPreFilter(whPosts);\nconsole.log(whPosts);}};return/*#__PURE__*/_jsxs(\"div\",{className:classes.feed,children:[/*#__PURE__*/_jsx(LoadingBar,{color:\"#f11946\",progress:progress,onLoaderFinished:()=>setProgress(0)}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:posts.length,next:fetchMoreData,hasMore:hasMore,loader:/*#__PURE__*/_jsx(Loader,{}),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.feedWrapper,style:{\"width\":!isMobileDevice&&!isTabletDevice&&windowSize.innerWidth-10+\"px\"},children:[!username||username===user.username,posts.map(p=>{return/*#__PURE__*/_jsx(Post,{onScrolling:updateViewdPosts,post:p,isDetail:false},p._id);})]})})]});}export default withStyles(styles)(Feed);","map":{"version":3,"names":["React","useState","useEffect","Post","Share","axios","useContext","AuthContext","withStyles","styles","InfiniteScroll","Loader","LoadingBar","useMediaQuery","useRef","regSw","subscribe","io","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Slide","jsx","_jsx","jsxs","_jsxs","Transition","forwardRef","props","ref","direction","Feed","_ref","username","classes","selectedValue","searchTerm","actionTriggered","posts","setPosts","hasMore","setHasMore","index","setIndex","isFiltered","setIsFiltered","preFilter","setPreFilter","progress","setProgress","preProfile","setPreProfile","viewedPosts","setViewedPosts","user","currentUser","isMobileDevice","query","isTabletDevice","socket","setSocket","open","setOpen","postCallCount","maxCalls","handleFeedAction","e","console","log","lc","post","_id","version","pool","userId","headers","token","fetchPosts","handleClickOpen","handleClose","continueProcess","prevPosts","slice","handleYes","firstPost","setTimeout","localStorage","getItem","newPost","desc","thumb","pst","emit","err","dlay","showPostsInOrder","windowSize","setWindowSize","getWindowSize","id","on","users","res","data","arr","prevItems","get","increment","pv","iv","followed","setFollowed","chek","ii","filterLoadedPosts","filteredData","filter","toLowerCase","includes","whPosts","concat","length","updateViewdPosts","fetchMoreData","innerWidth","innerHeight","window","handleWindowResize","addEventListener","removeEventListener","refreshed","className","feed","children","color","onLoaderFinished","dataLength","next","loader","feedWrapper","style","map","p","onScrolling","isDetail"],"sources":["/home/group4/TWON_STA_Case_Study/client/src/components/feed/Feed.js"],"sourcesContent":["import React from 'react';\nimport {useState, useEffect} from 'react'\nimport Post from '../post/Post'\nimport Share from '../share/Share'\nimport axios from \"axios\"\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { withStyles } from '@material-ui/core/styles';\nimport {styles} from './feedStyle';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport Loader from \"../loader/loader\";\nimport LoadingBar from \"react-top-loading-bar\";\nimport { useMediaQuery } from 'react-responsive';\nimport {useRef} from 'react';\nimport {regSw, subscribe} from '../../helper.js';\nimport {io} from 'socket.io-client';\n\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Slide from '@mui/material/Slide';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\n\nfunction Feed({username, classes, selectedValue, searchTerm, actionTriggered}) {\nconst [posts, setPosts] = useState([]);\nconst [hasMore, setHasMore] = useState(true);\nconst [index, setIndex] = useState(0);\nconst [isFiltered, setIsFiltered] = useState(false);\nconst [preFilter, setPreFilter] = useState(-1);\nconst [progress, setProgress] = useState(0);\nconst [preProfile, setPreProfile] = useState(\" \");\nconst [viewedPosts, setViewedPosts] = useState([]);\nconst { user: currentUser } = useContext(AuthContext);\nconst isMobileDevice = useMediaQuery({ query: \"(min-device-width: 480px)\", });\nconst isTabletDevice = useMediaQuery({ query: \"(min-device-width: 768px)\", });\nconst [socket, setSocket] = useState(null)\nconst [open, setOpen] = React.useState(false);\n \nlet postCallCount = 0; \nlet maxCalls = 5; \n\n\nconst handleFeedAction = async (e) => {\n    console.log(\"Feed received action from Topbar!\");\n    \n    const lc = await axios.post(\"/posts/\" + currentUser._id + \"/createRefreshData\", { version: user.pool, userId: user._id, headers: { 'auth-token': token }});\n    fetchPosts(0); \n    \n    \n};\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    continueProcess(0)\n    setPosts(prevPosts => prevPosts.slice(1));\n  };\n  \n  const handleYes = async (e) => {\n    setOpen(false);\n    \n    const firstPost = posts[0];\n    \n    setTimeout(() => {\n        setPosts(prevPosts => prevPosts.slice(1));\n      }, 1000);\n    \n    const token = localStorage.getItem('token');\n        const newPost = {\n          userId: user._id,\n          desc: firstPost.desc,\n          thumb: firstPost.thumb,\n          pool:user.pool,\n          headers: { 'auth-token': token },\n        };\n        try {\n            const pst = await axios.post(\"/posts/\" + user._id + \"/create\", newPost);\n            socket.emit('sendMessage', pst);\n            await axios.post(\"/posts/UserReadSpecialPost\", {\"postId\": firstPost._id, \"userId\":user._id , headers: { 'auth-token': token }})\n            continueProcess(10000)\n            postCallCount++;\n    } catch (err) {console.log(err);\n    }\n  };\n  \n  const continueProcess = (dlay) => {\n    if (postCallCount < maxCalls) {\n      // Call showPostsInOrder again after 60 seconds\n      setTimeout(() => {\n        showPostsInOrder();\n        \n  \n        // Continue the process by checking the condition in handleYes\n        if (postCallCount < maxCalls) {\n          setTimeout(() => {\n            //handleYes();\n          }, 5000);  // Wait 20 seconds after showPostsInOrder for handleYes\n        }\n  \n      }, dlay);  // 60000 milliseconds = 60 seconds\n    } else {\n      console.log(\"Process stopped after 5 calls.\");\n    }\n  };\n  \n\nconst [windowSize, setWindowSize] = useState(getWindowSize());\n\n//useEffect(() => {\n    //console.log(\"setSocket\");\n    //setSocket(io('wss://cleopatra.ijs.si/chat', {\n     //   transports: [ 'polling'],\n    //    withCredentials: true\n    //  }));\n      \n    \n//}, [])\n\nuseEffect(() => {\n    console.log('Posts updated: ', posts);\n    if (actionTriggered) {\n        handleFeedAction();\n    }\n}, [posts, actionTriggered]);\n\nuseEffect(() => {\n\n    socket?.emit('addUser', user?.id)\n        console.log(\"active users \")\n        socket?.on('getUsers', users => { \n            console.log(\"active users \", users)\n        })\n\n    socket?.on('getMessage', res => {\n        console.log('active data: >>', res.data );\n        if(res.data.pool == user.pool){\n            const arr = [res.data]\n            setPosts((prevItems) => [...arr, ...prevItems]);\n            console.log('posts data: >>', posts );\n        }\n        \n        //fetchPosts(selectedValue); \n    });\n    \n}, [socket]);\n\nconst showPostsInOrder = async () => {\n    const token = localStorage.getItem('token');\n    console.log(\"showPostsInOrder\");\n    const res = await axios.get(\"/posts/\" + currentUser._id + \"/getSpecialPosts\", {headers: { 'auth-token': token }})\n    console.log(res.data);\n    \n    if(res.data['no']){\n        const arr = [{\"_id\": res.data[\"_id\"], \"desc\":res.data[\"desc\"], \"pool\":res.data[\"pool\"] , \"userId\": \"66f590ae38f16e2cea8d0646\", \"thumb\":\"https://fastly.picsum.photos/id/451/200/300.jpg?blur=5&hmac=Cs_EydLmPTWdSMrzBl8vXIG9b3CaH9iP_yVdDFiXUhU\", \"likes\":[],\n        \"dislikes\":[], \"comments\":[], \"reposts\":[], \"rank\":1000}]\n        setPosts((prevItems) => [...arr, ...prevItems]);\n        console.log('posts data: >>', posts );\n\n        //postCallCount++;\n        setTimeout(handleClickOpen, 5000);\n}\n\n  };\n\n\nconst increment  = async (pv, iv) => {\n    console.log(\"increatem\");\n    console.log(pv);\n    console.log(iv);\n    setIndex(pv+iv);\n    console.log(index);\n};\n\n    /*async function registerAndSubscribe () {\n    try {\n        const serviceWorkerReg = await regSw ();\n        await subscribe (serviceWorkerReg);\n    } catch (error) {\n        console.log (error);\n    }\n}*/\n\nconst {user} = useContext(AuthContext);\nconst [followed, setFollowed] = useState([]\n    //currentUser.followings.includes(user?.id)\n    );\n\n    if(preFilter == -1){\n    console.log(preFilter);\n    setPreFilter(selectedValue);\n\n    } else if(preFilter !== selectedValue){\n    setIndex(0);\n    setPosts([]);\n    setPreFilter(selectedValue);\n\n    }\n\nconst chek = username ?  true : false;\nif(chek == true) {\n    console.log(preProfile);\n    console.log(\"User name1\");\n    console.log(username);\n    const ii = (preProfile === username) ? true : false;\n    console.log(ii);\nif (preProfile === \" \") {\n    setPreProfile(username);\n    console.log(\"User name2\");\n    console.log(username);\n    console.log(preProfile);\n    console.log(user.username);\n} else if(preProfile !== username) {\n    console.log(\"a NEW User name\");\n    console.log(username);\n    setIndex(0);\n    setPosts([]);\n    setPreProfile(username);\n}\n}\n\nconst filterLoadedPosts = async () => {\n    console.log(\"filterLoadedPosts\");\n    if (searchTerm === '') {\n        setPosts(posts);\n    } else {\n        const filteredData = posts.filter((post) => {\n        return post.desc.toLowerCase().includes(searchTerm.toLowerCase())\n        });\n        setPosts(filteredData);\n    }\n    \n}\n\nconst fetchPosts = async (selectedValue) => {\n    setProgress(30);\n    console.log(\"fetchpost\")\n    const chek = username ?  true : false;\nif(chek == true) {\n    console.log(preProfile);\n    console.log(\"User name1\");\n    console.log(username);\n    const ii = (preProfile === username) ? true : false;\n    console.log(ii);\nif (preProfile === \" \") {\n    setPreProfile(username);\n    console.log(\"User name2\");\n    console.log(username);\n    console.log(preProfile);\n    console.log(user.username);\n} else if(preProfile !== username) {\n    console.log(\"a NEW User name\");\n    console.log(username);\n    setIndex(0);\n    setPosts([]);\n    setPreProfile(username);\n}\n}\n\n    var whPosts = \"/posts/timelinePag/\";\n\n    if(selectedValue == 0){\n    var whPosts = \"/posts/timelinePag/\";\n    }\n    else if (selectedValue == 1){\n        whPosts = \"/posts/onlyFollowersPag/\"\n    }\n    else if (selectedValue == 2){\n        whPosts = \"/posts/onlyFollowingsPag/\"\n    }\n    console.log(preFilter);\n    console.log(whPosts);\n    const token = localStorage.getItem('token');\n    const res = username ?  await axios.get(\"/posts/profile/\" + username+`?page=${index}`, {headers: { 'auth-token': token, 'userId': user._id }}) : await axios.get(whPosts + user._id+`?page=${index}`, {headers: { 'auth-token': token, 'userId': user._id }});\n    console.log(res.data);\n    console.log(\"fetch posts\");\n    if(res.data.length){\n    if(res.data.length > 0){\n        setPosts((prevItems) => [...prevItems, ...res.data\n            //.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n        ]); \n        res.data.length%20 > 0 ? setHasMore(false) : setHasMore(true);\n        //setIndex((index) => index + 1);\n        increment(index, 1);\n        setProgress(100);\n    } else {\n        setHasMore(false);\n        setProgress(100);\n        //setPosts([]);\n        //setIndex((index) => 0);\n        //increment(index, -index);\n    }\n\n    //setPreFilter(whPosts);\n    console.log(whPosts);\n    //setPosts(res.data.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})); \n}};\n\nfunction updateViewdPosts( post) {\n    /*const oldViewed = [...viewedPosts, post];\n    setViewedPosts(oldViewed);\n    console.log(\"array  \", viewedPosts);\n    console.log(\"post id  \", post);\n    console.log(\"viewed length \", viewedPosts.length);\n    if(viewedPosts.length == 10){\n        axios.put(\"/users/\" + currentUser._id + \"/viewed\", { postId: post });\n        setViewedPosts([]);\n    }*/\n    }\n\nconst fetchMoreData = async () => {\n    setProgress(30);\n    if(searchTerm? searchTerm.length !== 0 : false){\n        console.log(\"searchTerm\");\n        console.log(searchTerm.length);\n        setProgress(100);\n        return\n    }\n\n    if(index == 0){\n        setProgress(100);\n        return\n    }\n    //console.log(\"fetchpost\")\n    \n    console.log(\"fetch more  posts\");\n    console.log(selectedValue);\n    var whPosts = \"/posts/timelinePag/\";\n\n    if(selectedValue == 0){\n        whPosts = \"/posts/timelinePag/\"\n    }\n    else if (selectedValue == 1){\n        whPosts = \"/posts/onlyFollowersPag/\"\n    }\n    else if (selectedValue == 2){\n        whPosts = \"/posts/onlyFollowingsPag/\"\n    }\n\n    const token = localStorage.getItem('token');\n    const res = username ?  await axios.get(\"/posts/profile/\" + username+`?page=${index}`, {headers: { 'auth-token': token }}): await axios.get(whPosts + user._id+`?page=${index}`, {headers: { 'auth-token': token }});\n    //console.log(res.data);\n    \n    if(res.data.length > 0){\n        setPosts((prevItems) => [...prevItems, ...res.data\n            //.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n        ]); \n         res.data.length%20 > 0 ? setHasMore(false) : setHasMore(true);\n        increment(index, 1);\n        setProgress(100);\n    }else {\n        setHasMore(false);\n        setProgress(100);\n        //setPosts([]);\n        //setIndex((index) => 0);\n        //increment(index, -index);\n    }\n};\n\nfunction getWindowSize() {\n    const {innerWidth, innerHeight} = window;\n    return {innerWidth, innerHeight};\n    };\n\nuseEffect(() => {\n    //registerAndSubscribe();\n    console.log(\"use effects!\");\n    //showPostsInOrder();\n    if (selectedValue !=10){\n    ///// Remove this breakpoint during the casestudy\n        //filterLoadedPosts()\n        if(searchTerm? searchTerm.length !== 0 : false){\n            console.log(\"searchTerm\");\n            console.log(searchTerm.length);\n            filterLoadedPosts()\n        } else {\n            //filterLoadedPosts()\n            fetchPosts(selectedValue);\n        }\n    }\n\n    function handleWindowResize() {\n        setWindowSize(getWindowSize());\n    }\n    window.addEventListener('resize', handleWindowResize);\n    \n    return () => {\n        window.removeEventListener('resize', handleWindowResize);\n    };\n\n}, [username, user._id, selectedValue, searchTerm])\n\nconst refreshed = async (selectedValue) => {\n    console.log(\"refreshed\");\n    setPosts([]);\n    const chek = username ?  true : false;\nif(chek == true) {\n    console.log(preProfile);\n    console.log(\"User name1\");\n    console.log(username);\n    const ii = (preProfile === username) ? true : false;\n    console.log(ii);\n    \nif (preProfile === \" \") {\n    setPreProfile(username);\n    console.log(\"User name2\");\n    console.log(username);\n    console.log(preProfile);\n    console.log(user.username);\n    \n} else if(preProfile !== username) {\n    console.log(\"a NEW User name\");\n    console.log(username);\n    setIndex(0);\n    setPosts([]);\n    setPreProfile(username);\n}\n}\n\n    var whPosts = \"/posts/timelinePag/\";\n\n    if(selectedValue == 0){\n    var whPosts = \"/posts/timelinePag/\";\n    }\n    else if (selectedValue == 1){\n        whPosts = \"/posts/onlyFollowersPag/\"\n    }\n    else if (selectedValue == 2){\n        whPosts = \"/posts/onlyFollowingsPag/\"\n    }\n    console.log(preFilter);\n    console.log(whPosts);\n    const token = localStorage.getItem('token');\n    const res = username ?  await axios.get(\"/posts/profile/\" + username+`?page=${0}`, {headers: { 'auth-token': token }}) : await axios.get(whPosts + user._id+`?page=${0}`, {headers: { 'auth-token': token }});\n    console.log(res.data);\n    console.log(\"fetch posts\");\n    if(res.data.length){\n    if(res.data.length > 0){\n        setPosts((prevItems) => [...prevItems, ...res.data\n            //.sort((p1,p2) => {return new Date(p2.createdAt) - new Date(p1.createdAt);})\n        ]); \n        res.data.length%20 > 0 ? setHasMore(false) : setHasMore(true);\n        //setIndex((index) => index + 1);\n        increment(0, 1);\n    } else {\n        setHasMore(false)\n        //setPosts([]);\n        //setIndex((index) => 0);\n        //increment(index, -index);\n    }\n\n    //setPreFilter(whPosts);\n    console.log(whPosts);\n}}\n\nreturn (\n    <div className={classes.feed}>\n    <LoadingBar   color=\"#f11946\"   progress={progress}   onLoaderFinished={() => setProgress(0)} />\n        <InfiniteScroll dataLength={posts.length} next={fetchMoreData} hasMore={hasMore} loader={<Loader />}>\n        <div className={classes.feedWrapper} style={{\"width\": (!isMobileDevice && !isTabletDevice) && (windowSize.innerWidth-10)+\"px\"}}>\n            {( !username || username === user.username) }\n            {posts.map((p) => {\n                return <Post onScrolling={updateViewdPosts} key={p._id} post={p} isDetail={false}/>\n            })}\n        </div>\n        </InfiniteScroll>\n        \n        {/*<React.Fragment>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={handleClose}\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle>{\"Attention\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            Have you read the new post??\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleYes}>Yes</Button>\n          <Button onClick={handleClose}>No</Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>*/}\n        \n        \n    </div>\n    \n    \n    \n)\n}\n\nexport default withStyles(styles)(Feed);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}